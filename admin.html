<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover"/>
<meta name="apple-mobile-web-app-capable" content="yes"/>
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>
<meta name="theme-color" content="#030509"/>
<title>NOVA ADMIN</title>
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Space+Mono:wght@400;700&family=DM+Sans:wght@400;500&display=swap" rel="stylesheet"/>
<style>
/* ‚ïê‚ïê TOKENS ‚ïê‚ïê */
:root{
  --bg:#030509;--bg2:#07101e;
  --p:rgba(0,222,180,.04);--p2:rgba(0,222,180,.1);
  --b:rgba(0,222,180,.12);--b2:rgba(0,222,180,.3);
  --c:#00deb4;--mag:#ff0088;--amb:#f0b429;--pur:#9d5cff;
  --grn:#00e676;--red:#ff4d6d;
  --tx:#c0d0e4;--mt:rgba(192,208,228,.42);
  --fd:'Bebas Neue',sans-serif;--fm:'Space Mono',monospace;--fb:'DM Sans',sans-serif;
  --glow:0 0 18px rgba(0,222,180,.35);
  --nh:56px;      /* top nav height */
  --bh:64px;      /* bottom nav height (without safe area) */
  --sw:230px;     /* sidebar width desktop */
  /* safe area handled via env() directly */
}
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
html{height:100%;-webkit-tap-highlight-color:transparent}
body{background:var(--bg);color:var(--tx);font-family:var(--fb);overflow-x:hidden;min-height:100%}
::selection{background:var(--c);color:#000}
input,textarea,select,button{font-family:inherit}
img{max-width:100%;display:block}
::-webkit-scrollbar{width:3px;height:3px}
::-webkit-scrollbar-track{background:var(--bg)}
::-webkit-scrollbar-thumb{background:rgba(0,222,180,.2)}

/* ‚ïê‚ïê DESKTOP layout (sidebar + main) ‚ïê‚ïê */
@media(min-width:768px){
  body{
    display:grid;
    grid-template-columns:var(--sw) 1fr;
    grid-template-rows:var(--nh) calc(100vh - var(--nh));
    height:100vh;overflow:hidden
  }
  #topbar{grid-column:1/-1;grid-row:1}
  #sidebar{grid-column:1;grid-row:2;overflow-y:auto;border-right:1px solid var(--b);background:var(--bg2);display:flex!important;flex-direction:column}
  #main{grid-column:2;grid-row:2;overflow-y:auto;padding:28px 32px}
  /* STRICTLY hide mobile elements on desktop */
  #botnav{display:none!important}
  #mob-menu{display:none!important}
  .panel{max-width:760px}
}

/* ‚ïê‚ïê MOBILE layout ‚ïê‚ïê */
@media(max-width:767px){
  #sidebar{display:none!important}
  body{padding-top:0;padding-bottom:0}
  #main{
    display:block;
    position:fixed;
    top:var(--nh);
    bottom:calc(var(--bh) + env(safe-area-inset-bottom, 0px));
    left:0;right:0;
    overflow-y:auto;
    -webkit-overflow-scrolling:touch;
    padding:16px 16px 24px;
    /* extra breathing room for Dynamic Island */
    padding-top:calc(env(safe-area-inset-top, 0px) + 16px)
  }
}

/* ‚ïê‚ïê TOP BAR ‚ïê‚ïê */
#topbar{
  position:fixed;top:0;left:0;right:0;z-index:200;
  height:var(--nh);background:rgba(3,5,9,.97);backdrop-filter:blur(20px);
  border-bottom:1px solid var(--b);
  display:flex;align-items:center;justify-content:space-between;padding:0 16px;gap:10px
}
.tb-logo{font-family:var(--fd);font-size:1.1rem;letter-spacing:5px;color:var(--c);text-shadow:var(--glow)}
.tb-logo span{color:var(--mag)}
.tb-right{display:flex;align-items:center;gap:8px}
.tb-st{
  display:flex;align-items:center;gap:5px;
  font-family:var(--fm);font-size:.5rem;letter-spacing:1.5px;padding:5px 9px;
  border:1px solid rgba(192,208,228,.15);color:var(--mt)
}
.tb-dot{width:5px;height:5px;border-radius:50%;background:var(--mt);animation:dp 1.8s infinite}
@keyframes dp{0%,100%{opacity:1}50%{opacity:.25}}
.ib{font-family:var(--fm);font-size:.53rem;letter-spacing:2px;text-transform:uppercase;padding:7px 12px;border:1px solid var(--c);color:var(--c);background:none;cursor:pointer;transition:all .18s}
.ib:active{background:var(--c);color:#000}

/* ‚ïê‚ïê DESKTOP SIDEBAR ‚ïê‚ïê */
#sidebar{padding:8px 0}
.sb-grp{font-family:var(--fm);font-size:.47rem;letter-spacing:3px;text-transform:uppercase;color:var(--mt);padding:12px 16px 4px}
.sb-hr{height:1px;background:var(--b);margin:5px 16px}
.sb-btn{
  display:flex;align-items:center;gap:10px;width:100%;padding:11px 16px;
  background:none;border:none;border-left:2px solid transparent;
  color:var(--mt);font-family:var(--fm);font-size:.61rem;letter-spacing:.5px;
  cursor:pointer;transition:all .18s;text-align:left
}
.sb-btn:hover{color:var(--tx);background:var(--p)}
.sb-btn.on{color:var(--c);background:var(--p2);border-left-color:var(--c)}
.sb-i{width:18px;text-align:center;flex-shrink:0;font-size:.95rem}
.sb-l{flex:1}
.sb-c{font-family:var(--fm);font-size:.47rem;margin-left:auto;background:rgba(0,222,180,.1);border:1px solid rgba(0,222,180,.2);color:var(--c);padding:1px 5px}
.sb-c.r{background:rgba(255,77,109,.1);border-color:rgba(255,77,109,.25);color:var(--red)}

/* ‚ïê‚ïê MAIN ‚ïê‚ïê */
#main{position:relative}
.panel{display:none;animation:pin .2s ease}
.panel.on{display:block}
@keyframes pin{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}
.pt{margin-bottom:20px;padding-bottom:14px;border-bottom:1px solid var(--b)}
.pt h1{font-family:var(--fd);font-size:1.85rem;letter-spacing:3px;line-height:1}
.pt h1 em{color:var(--c);font-style:normal}
.pt p{font-family:var(--fm);font-size:.55rem;letter-spacing:2px;color:var(--mt);margin-top:5px;text-transform:uppercase}

/* ‚ïê‚ïê MOBILE BOTTOM NAV ‚ïê‚ïê */
#botnav{
  position:fixed;bottom:0;left:0;right:0;z-index:200;
  height:calc(var(--bh) + env(safe-area-inset-bottom, 0px));
  padding-bottom:env(safe-area-inset-bottom, 0px);
  background:rgba(3,5,9,.98);backdrop-filter:blur(24px);
  border-top:1px solid var(--b);
  display:none;/* hidden by default ‚Äî shown only on mobile via media query */
  align-items:stretch
}
@media(max-width:767px){
  #botnav{display:flex}
}
.bn{
  flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;
  gap:3px;border:none;background:none;cursor:pointer;color:var(--mt);position:relative;
  padding-bottom:4px
}
.bn::after{content:'';position:absolute;top:0;left:25%;right:25%;height:2px;background:var(--c);transform:scaleX(0);transition:transform .22s}
.bn.on{color:var(--c)}.bn.on::after{transform:scaleX(1)}
.bn-i{font-size:1.2rem;line-height:1;transition:transform .18s}.bn.on .bn-i{transform:scale(1.1)}
.bn-l{font-family:var(--fm);font-size:.38rem;letter-spacing:1.5px;text-transform:uppercase;color:inherit}
.bn-bdg{position:absolute;top:7px;right:calc(50% - 22px);background:var(--red);color:#fff;font-family:var(--fm);font-size:.44rem;min-width:14px;height:14px;border-radius:7px;display:none;align-items:center;justify-content:center;padding:0 3px}
.bn-bdg.on{display:flex}

/* ‚ïê‚ïê MOBILE FULL-SCREEN MENU ‚ïê‚ïê */
#mob-menu{
  position:fixed;inset:0;z-index:300;
  background:rgba(3,5,9,.99);backdrop-filter:blur(28px);
  display:flex;flex-direction:column;
  transform:translateX(100%);transition:transform .3s cubic-bezier(.25,.46,.45,.94);
  /* account for both top bar and bottom nav+safe-area */
  padding-top:calc(var(--nh) + env(safe-area-inset-top, 0px));
  padding-bottom:calc(var(--bh) + env(safe-area-inset-bottom, 0px))
}
#mob-menu.open{transform:translateX(0)}
#mob-menu-scroll{
  flex:1;overflow-y:auto;-webkit-overflow-scrolling:touch;
  padding-top:var(--nh);
  padding-bottom:calc(var(--bh) + env(safe-area-inset-bottom, 0px) + 8px)
}
.mm-hd{font-family:var(--fm);font-size:.54rem;letter-spacing:3px;text-transform:uppercase;color:var(--mt);padding:14px 20px 8px;border-bottom:1px solid var(--b)}
.mm-grp{padding:4px 0}
.mm-gl{font-family:var(--fm);font-size:.46rem;letter-spacing:3px;text-transform:uppercase;color:var(--mt);padding:10px 20px 4px}
.mm-item{
  display:flex;align-items:center;gap:14px;width:100%;
  padding:15px 20px;background:none;border:none;
  border-bottom:1px solid rgba(0,222,180,.05);
  color:var(--tx);cursor:pointer;text-align:left;transition:background .15s
}
.mm-item:active{background:var(--p2)}
.mm-item.on{color:var(--c);background:var(--p)}
.mm-i{font-size:1.3rem;width:26px;text-align:center;flex-shrink:0}
.mm-l{font-family:var(--fm);font-size:.66rem;letter-spacing:.5px;flex:1}
.mm-c{font-family:var(--fm);font-size:.48rem;padding:2px 6px;background:rgba(0,222,180,.1);border:1px solid rgba(0,222,180,.2);color:var(--c)}
.mm-c.r{background:rgba(255,77,109,.1);border-color:rgba(255,77,109,.25);color:var(--red)}
/* Sticky actions at bottom of menu */
#mob-menu-actions{
  padding:14px 20px;
  padding-bottom:calc(14px + env(safe-area-inset-bottom, 0px));
  border-top:1px solid var(--b);background:var(--bg2);
  display:flex;gap:10px;flex-shrink:0;position:sticky;bottom:0
}

/* ‚ïê‚ïê CARDS ‚ïê‚ïê */
.card{background:var(--p);border:1px solid var(--b);margin-bottom:14px}
.card-hd{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;border-bottom:1px solid var(--b)}
.ct{font-family:var(--fm);font-size:.63rem;letter-spacing:2px;text-transform:uppercase;color:var(--tx)}
.card-body{padding:16px}

/* ‚ïê‚ïê FORMS ‚ïê‚ïê */
.fg{display:flex;flex-direction:column;gap:5px;margin-bottom:12px}
.fg label{font-family:var(--fm);font-size:.54rem;letter-spacing:2px;text-transform:uppercase;color:var(--c)}
.fg input,.fg textarea,.fg select{
  background:rgba(0,0,0,.32);border:1px solid var(--b);
  padding:11px 12px;color:var(--tx);font-family:var(--fm);font-size:.73rem;
  outline:none;transition:border-color .18s;width:100%;border-radius:0;-webkit-appearance:none
}
.fg input:focus,.fg textarea:focus,.fg select:focus{border-color:var(--c);background:rgba(0,222,180,.02)}
.fg textarea{resize:vertical;min-height:80px;line-height:1.6}
.fg select option{background:var(--bg2)}
.fg input[type=range]{border:none;background:none;-webkit-appearance:auto;padding:6px 0;height:auto}
.f2{display:grid;grid-template-columns:1fr 1fr;gap:10px}
@media(max-width:480px){.f2{grid-template-columns:1fr}}

/* ‚ïê‚ïê BUTTONS ‚ïê‚ïê */
.btn{padding:10px 16px;font-family:var(--fm);font-size:.6rem;letter-spacing:2px;text-transform:uppercase;border:1px solid;cursor:pointer;background:none;border-radius:0;-webkit-appearance:none;transition:all .18s}
.bc{color:var(--c);border-color:var(--c)}.bc:active{background:var(--c);color:#000}
.bg{color:var(--grn);border-color:var(--grn)}.bg:active{background:var(--grn);color:#000}
.br{color:var(--red);border-color:var(--red)}.br:active{background:var(--red);color:#000}
.ba{color:var(--amb);border-color:var(--amb)}.ba:active{background:var(--amb);color:#000}
.bp{color:var(--pur);border-color:var(--pur)}.bp:active{background:var(--pur);color:#000}
.bsm{padding:6px 11px;font-size:.54rem}
.bfw{width:100%;padding:14px;font-size:.66rem;letter-spacing:3px}
.btn-row{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}

/* ‚ïê‚ïê DASHBOARD STATS ‚ïê‚ïê */
.dg{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-bottom:14px}
@media(max-width:480px){.dg{grid-template-columns:1fr 1fr}}
.ds{background:var(--p);border:1px solid var(--b);padding:16px;text-align:center}
.ds-n{font-family:var(--fd);font-size:2rem;color:var(--c);text-shadow:var(--glow);line-height:1}
.ds-l{font-family:var(--fm);font-size:.48rem;letter-spacing:2px;text-transform:uppercase;color:var(--mt);margin-top:4px}

/* ‚ïê‚ïê LOG ‚ïê‚ïê */
.logbox{background:rgba(0,0,0,.4);padding:12px;max-height:160px;overflow-y:auto;font-family:var(--fm);font-size:.6rem}
.le{display:flex;gap:10px;padding:3px 0;border-bottom:1px solid rgba(255,255,255,.04);line-height:1.4}
.lt{color:var(--mt);flex-shrink:0;font-size:.55rem}
.lm{color:var(--tx)}.lm.ok{color:var(--grn)}.lm.er{color:var(--red)}.lm.in{color:var(--c)}

/* ‚ïê‚ïê AVATAR ‚ïê‚ïê */
.av-wrap{display:flex;align-items:center;gap:14px;padding:12px;background:rgba(0,0,0,.3);border:1px solid var(--b);margin-bottom:12px}
.av-circle{width:72px;height:72px;border-radius:50%;border:2px solid var(--b2);overflow:hidden;flex-shrink:0;background:rgba(0,222,180,.05);display:flex;align-items:center;justify-content:center;font-size:2rem}
.av-circle img{width:100%;height:100%;object-fit:cover}
.av-info{flex:1}
.av-info p{font-family:var(--fm);font-size:.57rem;color:var(--mt);line-height:1.6;margin-bottom:8px}

/* ‚ïê‚ïê LIST ITEMS ‚ïê‚ïê */
.li{background:rgba(0,0,0,.2);border:1px solid var(--b);padding:12px 14px;margin-bottom:8px;display:flex;align-items:flex-start;gap:10px}
.li-stripe{width:3px;align-self:stretch;border-radius:2px;flex-shrink:0}
.li-body{flex:1;min-width:0}
.li-title{font-family:var(--fm);font-size:.7rem;letter-spacing:.5px;color:#fff;margin-bottom:2px}
.li-sub{font-family:var(--fm);font-size:.56rem;color:var(--mt);margin-top:2px;line-height:1.4}
.li-tags{display:flex;gap:4px;flex-wrap:wrap;margin-top:6px}
.li-tag{font-family:var(--fm);font-size:.46rem;padding:2px 6px;background:rgba(157,92,255,.1);border:1px solid rgba(157,92,255,.2);color:var(--pur)}

/* ‚ïê‚ïê SKILL BAR ‚ïê‚ïê */
.skb{height:3px;background:rgba(255,255,255,.06);margin-top:6px}
.skf{height:100%;transition:width .35s}

/* ‚ïê‚ïê SWATCHES ‚ïê‚ïê */
.swatches{display:flex;gap:6px;flex-wrap:wrap;margin-top:6px}
.sw{width:26px;height:26px;border-radius:3px;cursor:pointer;border:2px solid transparent;transition:border-color .15s}
.sw.on,.sw:active{border-color:#fff}

/* ‚ïê‚ïê TOGGLE ‚ïê‚ïê */
.tog-row{display:flex;align-items:center;justify-content:space-between;padding:12px 0;border-bottom:1px solid var(--b)}
.tog-row:last-child{border-bottom:none}
.tog-lbl{font-family:var(--fm);font-size:.62rem;color:var(--tx)}
.tog-sub{font-family:var(--fm);font-size:.52rem;color:var(--mt);margin-top:2px}
.tog{position:relative;width:44px;height:24px;flex-shrink:0}
.tog input{opacity:0;width:0;height:0;position:absolute}
.tog-sl{position:absolute;inset:0;background:rgba(255,255,255,.07);border:1px solid var(--b);border-radius:12px;cursor:pointer;transition:all .22s}
.tog-sl::before{content:'';position:absolute;height:18px;width:18px;left:2px;bottom:2px;background:var(--mt);border-radius:50%;transition:all .22s}
.tog input:checked+.tog-sl{background:rgba(0,222,180,.18);border-color:var(--c)}
.tog input:checked+.tog-sl::before{transform:translateX(20px);background:var(--c)}

/* ‚ïê‚ïê TOAST ‚ïê‚ïê */
#toast{
  position:fixed;z-index:9999;font-family:var(--fm);font-size:.65rem;letter-spacing:1px;
  padding:13px 16px;border:1px solid;display:none;text-align:center;backdrop-filter:blur(10px);
  bottom:20px;left:16px;right:16px
}
@media(max-width:767px){
  #toast{bottom:calc(var(--bh) + env(safe-area-inset-bottom, 0px) + 10px)}
}
@media(min-width:768px){#toast{left:auto;right:24px;max-width:360px}}
#toast.ok{border-color:var(--grn);color:var(--grn);background:rgba(0,230,118,.1)}
#toast.er{border-color:var(--red);color:var(--red);background:rgba(255,77,109,.1)}
#toast.in{border-color:var(--c);color:var(--c);background:rgba(0,222,180,.07)}

/* ‚ïê‚ïê LOCK SCREEN ‚ïê‚ïê */
#lock{position:fixed;inset:0;z-index:9000;background:var(--bg);display:flex;flex-direction:column;align-items:center;justify-content:center;padding:24px;transition:opacity .4s,visibility .4s}
#lock.gone{opacity:0;visibility:hidden;pointer-events:none}
.lk-grid{position:absolute;inset:0;opacity:.05;background:linear-gradient(var(--c) 1px,transparent 1px) 0 0/40px 40px,linear-gradient(90deg,var(--c) 1px,transparent 1px) 0 0/40px 40px;pointer-events:none}
.lk-corners span{position:absolute;width:20px;height:20px;border-color:var(--c);border-style:solid;opacity:.5}
.lk-corners span:nth-child(1){top:max(16px,env(safe-area-inset-top));left:16px;border-width:2px 0 0 2px}
.lk-corners span:nth-child(2){top:max(16px,env(safe-area-inset-top));right:16px;border-width:2px 2px 0 0}
.lk-corners span:nth-child(3){bottom:max(16px,var(--sab));left:16px;border-width:0 0 2px 2px}
.lk-corners span:nth-child(4){bottom:max(16px,var(--sab));right:16px;border-width:0 2px 2px 0}
.lk-box{position:relative;z-index:1;width:100%;max-width:360px;display:flex;flex-direction:column;align-items:center}
.lk-logo{font-family:var(--fd);font-size:clamp(2.4rem,8vw,3.4rem);letter-spacing:10px;color:var(--c);text-shadow:var(--glow);margin-bottom:4px}
.lk-sub{font-family:var(--fm);font-size:.55rem;letter-spacing:4px;color:var(--mt);text-transform:uppercase;margin-bottom:32px}
.lk-icon{font-size:2.6rem;margin-bottom:14px;animation:lkf 3s ease-in-out infinite}
@keyframes lkf{0%,100%{transform:translateY(0)}50%{transform:translateY(-7px)}}
.lk-title{font-family:var(--fd);font-size:1.4rem;letter-spacing:4px;color:var(--tx);margin-bottom:6px;text-align:center}
.lk-hint{font-family:var(--fm);font-size:.56rem;letter-spacing:1.5px;color:var(--mt);text-align:center;margin-bottom:22px;line-height:1.6;padding:0 8px}
.lk-wrap{position:relative;width:100%;margin-bottom:9px}
.lk-in{width:100%;background:rgba(0,0,0,.5);border:1px solid var(--b);padding:15px 46px 15px 18px;color:var(--tx);font-family:var(--fm);font-size:1rem;letter-spacing:6px;outline:none;text-align:center;transition:border-color .2s;border-radius:0}
.lk-in:focus{border-color:var(--c)}
.lk-in.shake{animation:shk .38s}
@keyframes shk{0%,100%{transform:translateX(0)}25%{transform:translateX(-8px)}75%{transform:translateX(8px)}}
.lk-eye{position:absolute;right:12px;top:50%;transform:translateY(-50%);background:none;border:none;color:var(--mt);font-size:1.1rem;padding:6px;cursor:pointer}
.lk-err{font-family:var(--fm);font-size:.6rem;color:var(--red);text-align:center;min-height:18px;margin-bottom:8px}
.lk-btn{width:100%;padding:15px;font-family:var(--fm);font-size:.72rem;letter-spacing:3px;text-transform:uppercase;background:none;border:1px solid var(--c);color:var(--c);cursor:pointer;position:relative;overflow:hidden;transition:color .22s;border-radius:0}
.lk-btn::before{content:'';position:absolute;inset:0;background:var(--c);transform:scaleX(0);transform-origin:left;transition:transform .22s}
.lk-btn:active::before{transform:scaleX(1)}.lk-btn:active{color:#000}
.lk-btn span{position:relative}
.lk-note{font-family:var(--fm);font-size:.53rem;color:var(--mt);margin-top:16px;text-align:center;line-height:1.7}

/* ‚ïê‚ïê GH MODAL ‚ïê‚ïê */
#gh-modal{position:fixed;inset:0;z-index:500;background:rgba(3,5,9,.97);backdrop-filter:blur(20px);display:flex;align-items:center;justify-content:center;padding:20px;overflow-y:auto}
#gh-modal.hide{display:none}
.mb{background:var(--bg2);border:1px solid var(--b2);padding:24px;width:100%;max-width:440px}
.mb-title{font-family:var(--fd);font-size:1.5rem;letter-spacing:3px;color:var(--c);margin-bottom:4px}
.mb-sub{font-family:var(--fm);font-size:.57rem;letter-spacing:1.5px;color:var(--mt);text-transform:uppercase;margin-bottom:18px}
.mb-step{display:flex;gap:10px;margin-bottom:10px}
.mb-sn{font-family:var(--fd);font-size:1.2rem;color:var(--c);width:22px;flex-shrink:0;line-height:1.1}
.mb-st{font-family:var(--fm);font-size:.6rem;color:var(--mt);line-height:1.6}
.mb-st strong{color:var(--tx)}
.mb-lbl{font-family:var(--fm);font-size:.54rem;letter-spacing:2px;text-transform:uppercase;color:var(--c);display:block;margin-bottom:4px;margin-top:12px}
.mb-in{width:100%;background:rgba(0,0,0,.4);border:1px solid var(--b2);padding:12px 14px;color:var(--tx);font-family:var(--fm);font-size:.73rem;outline:none;transition:border-color .18s;border-radius:0;-webkit-appearance:none;margin-bottom:4px}
.mb-in:focus{border-color:var(--c)}
.mb-note{font-family:var(--fm);font-size:.57rem;color:var(--mt);line-height:1.6;margin-top:10px;padding:10px;border:1px solid var(--b);background:rgba(0,222,180,.03)}

/* ‚ïê‚ïê INBOX MESSAGES ‚ïê‚ïê */
.msg{background:rgba(0,0,0,.22);border:1px solid var(--b);padding:14px;margin-bottom:8px}
.msg-hd{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:8px;gap:8px}
.msg-nm{font-family:var(--fm);font-size:.66rem;color:#fff}
.msg-em{font-family:var(--fm);font-size:.56rem;color:var(--c);margin-top:2px}
.msg-tm{font-family:var(--fm);font-size:.51rem;color:var(--mt);flex-shrink:0;white-space:nowrap}
.msg-sj{font-family:var(--fm);font-size:.6rem;color:var(--amb);margin-bottom:6px}
.msg-bd{font-size:.85rem;line-height:1.65;color:rgba(192,208,228,.7)}

/* ‚ïê‚ïê SETTINGS CONFIG BOX ‚ïê‚ïê */
.cfg-box{background:rgba(0,0,0,.28);border:1px solid var(--b);padding:14px;margin-bottom:12px}
.cfg-row{display:flex;align-items:center;justify-content:space-between;margin-bottom:6px}
.cfg-lbl{font-family:var(--fm);font-size:.55rem;letter-spacing:1.5px;color:var(--mt);text-transform:uppercase}
.cfg-val{font-family:var(--fm);font-size:.62rem;color:var(--tx);word-break:break-all;text-align:right;max-width:58%}
.cfg-note{font-family:var(--fm);font-size:.58rem;color:var(--c);padding:10px;border:1px solid var(--b);background:rgba(0,222,180,.03);line-height:1.7;margin-bottom:12px}

/* ‚ïê‚ïê CERT BADGE ‚ïê‚ïê */
.cert-drop{width:80px;height:80px;border:1px dashed var(--b2);background:rgba(0,0,0,.2);display:flex;align-items:center;justify-content:center;font-size:1.8rem;cursor:pointer;overflow:hidden;position:relative;flex-shrink:0}
.cert-drop img{position:absolute;inset:0;width:100%;height:100%;object-fit:contain}

/* ‚ïê‚ïê SECTION LABEL ‚ïê‚ïê */
.sec-lbl{font-family:var(--fm);font-size:.51rem;letter-spacing:3px;text-transform:uppercase;color:var(--mt);padding:10px 0;border-bottom:1px solid var(--b);margin-bottom:12px}

/* ‚ïê‚ïê SYNC STATUS INDICATOR ‚ïê‚ïê */
.sync-bar{font-family:var(--fm);font-size:.58rem;padding:10px 14px;border:1px solid;margin-bottom:12px;line-height:1.6}
.sync-bar.ok{border-color:rgba(0,230,118,.3);color:var(--grn);background:rgba(0,230,118,.05)}
.sync-bar.er{border-color:rgba(255,77,109,.3);color:var(--red);background:rgba(255,77,109,.05)}
.sync-bar.in{border-color:rgba(0,222,180,.25);color:var(--c);background:rgba(0,222,180,.04)}
</style>
</head>
<body>

<!-- ‚ïê‚ïê LOCK ‚ïê‚ïê -->
<div id="lock">
  <div class="lk-grid"></div>
  <div class="lk-corners"><span></span><span></span><span></span><span></span></div>
  <div class="lk-box">
    <div class="lk-logo">NOVA</div>
    <div class="lk-sub">Admin Control Panel</div>
    <div class="lk-icon" id="lk-icon">üîí</div>
    <div class="lk-title" id="lk-title">ACCESS RESTRICTED</div>
    <div class="lk-hint" id="lk-hint">Enter your admin password</div>
    <div class="lk-wrap">
      <input class="lk-in" type="password" id="lk-pw" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="off" maxlength="64"/>
      <button class="lk-eye" id="lk-eye">üëÅ</button>
    </div>
    <div class="lk-err" id="lk-err"></div>
    <button class="lk-btn" id="lk-btn"><span id="lk-btxt">UNLOCK</span></button>
    <div class="lk-note" id="lk-note"></div>
  </div>
</div>

<!-- ‚ïê‚ïê TOAST ‚ïê‚ïê -->
<div id="toast"></div>

<!-- ‚ïê‚ïê GH MODAL ‚ïê‚ïê -->
<div id="gh-modal" class="hide">
  <div class="mb">
    <div class="mb-title">GITHUB CONNECT</div>
    <div class="mb-sub">Sync portfolio across all devices</div>
    <div class="mb-step"><div class="mb-sn">1</div><div class="mb-st">Go to <strong>GitHub ‚Üí Settings ‚Üí Developer settings ‚Üí Personal access tokens (classic)</strong> ‚Üí Generate new. Name it anything. Check <strong>gist</strong> AND <strong>public_repo</strong> scopes.</div></div>
    <div class="mb-step"><div class="mb-sn">2</div><div class="mb-st">Enter your <strong>GitHub username</strong> and the <strong>repo name</strong> where portfolio.html is hosted (e.g. <strong>username.github.io</strong>). This lets the admin push a <strong>data.json</strong> file to your repo so all devices see your updates.</div></div>
    <label class="mb-lbl">GitHub Token (ghp_...)</label>
    <input class="mb-in" type="password" id="m-tok" placeholder="ghp_xxxxxxxxxxxxxxxxxxxx" autocomplete="off"/>
    <label class="mb-lbl">GitHub Username</label>
    <input class="mb-in" type="text" id="m-user" placeholder="yourusername"/>
    <label class="mb-lbl">Repo Name (e.g. yourusername.github.io)</label>
    <input class="mb-in" type="text" id="m-repo" placeholder="yourusername.github.io"/>
    <label class="mb-lbl">Gist ID (optional ‚Äî from desktop Settings)</label>
    <input class="mb-in" type="text" id="m-gid" placeholder="Leave blank ‚Äî auto-discovered from data.json"/>
    <div class="mb-note">
      ‚úì Fill Username + Repo ‚Üí tap CONNECT ‚Üí data loads automatically from GitHub Pages<br/>
      ‚úì Or enter Gist ID directly if you have it from desktop Settings<br/>
      ‚úì Token stored only in your browser ‚Äî never sent to any server
    </div>
    <div style="display:flex;gap:10px;margin-top:16px">
      <button class="btn bc bfw" id="m-connect" style="flex:2"><span>CONNECT &amp; SAVE</span></button>
      <button class="btn ba" id="m-skip" style="flex:1"><span>SKIP</span></button>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê TOP BAR ‚ïê‚ïê -->
<div id="topbar">
  <div class="tb-logo">NOVA<span>/</span>ADMIN</div>
  <div class="tb-right">
    <div class="tb-st" id="gh-bar">
      <div class="tb-dot" id="gh-dot"></div>
      <span id="gh-txt" style="font-family:var(--fm);font-size:.5rem;letter-spacing:1px">NOT CONNECTED</span>
    </div>
    <button class="ib" id="tb-push">‚¨Ü PUSH</button>
  </div>
</div>

<!-- ‚ïê‚ïê DESKTOP SIDEBAR ‚ïê‚ïê -->
<aside id="sidebar">
  <div style="padding:8px 0;flex:1">
    <div class="sb-grp">Overview</div>
    <button class="sb-btn on" data-p="dash"><span class="sb-i">‚óâ</span><span class="sb-l">Dashboard</span></button>
    <div class="sb-hr"></div>
    <div class="sb-grp">Appearance</div>
    <button class="sb-btn" data-p="splash"><span class="sb-i">‚ú¶</span><span class="sb-l">Splash Screen</span></button>
    <button class="sb-btn" data-p="hero"><span class="sb-i">‚óà</span><span class="sb-l">Hero &amp; Identity</span></button>
    <button class="sb-btn" data-p="about"><span class="sb-i">‚óê</span><span class="sb-l">About Section</span></button>
    <button class="sb-btn" data-p="footer"><span class="sb-i">‚ñ£</span><span class="sb-l">Footer</span></button>
    <div class="sb-hr"></div>
    <div class="sb-grp">Content</div>
    <button class="sb-btn" data-p="skills"><span class="sb-i">‚óá</span><span class="sb-l">Skills</span><span class="sb-c" id="sb-sk">0</span></button>
    <button class="sb-btn" data-p="projects"><span class="sb-i">‚óÜ</span><span class="sb-l">Projects</span><span class="sb-c" id="sb-pj">0</span></button>
    <button class="sb-btn" data-p="experience"><span class="sb-i">‚óé</span><span class="sb-l">Experience</span><span class="sb-c" id="sb-ex">0</span></button>
    <button class="sb-btn" data-p="certs"><span class="sb-i">üéñ</span><span class="sb-l">Certifications</span><span class="sb-c" id="sb-ce">0</span></button>
    <button class="sb-btn" data-p="contact"><span class="sb-i">‚úâ</span><span class="sb-l">Contact Info</span></button>
    <div class="sb-hr"></div>
    <div class="sb-grp">System</div>
    <button class="sb-btn" data-p="inbox"><span class="sb-i">üì¨</span><span class="sb-l">Inbox</span><span class="sb-c r" id="sb-msg">0</span></button>
    <button class="sb-btn" data-p="settings"><span class="sb-i">‚öô</span><span class="sb-l">Settings</span></button>
  </div>
  <div style="padding:12px 16px;border-top:1px solid var(--b)">
    <button class="btn bc bfw bsm" onclick="window.open('portfolio.html','_blank')"><span>‚Üó VIEW PORTFOLIO</span></button>
  </div>
</aside>

<!-- ‚ïê‚ïê MAIN ‚ïê‚ïê -->
<div id="main">

<!-- DASHBOARD -->
<div class="panel on" id="p-dash">
  <div class="pt"><h1><em>DASH</em>BOARD</h1><p>Portfolio at a glance</p></div>
  <div id="sync-status"></div>
  <div class="dg">
    <div class="ds"><div class="ds-n" id="d-sk">0</div><div class="ds-l">Skills</div></div>
    <div class="ds"><div class="ds-n" id="d-pj">0</div><div class="ds-l">Projects</div></div>
    <div class="ds"><div class="ds-n" id="d-ex">0</div><div class="ds-l">Experience</div></div>
    <div class="ds"><div class="ds-n" id="d-ce">0</div><div class="ds-l">Certifications</div></div>
    <div class="ds"><div class="ds-n" id="d-ms">0</div><div class="ds-l">Messages</div></div>
    <div class="ds"><div class="ds-n" id="d-sv" style="font-size:.8rem;padding-top:6px">‚Äî</div><div class="ds-l">Last Push</div></div>
  </div>
  <div class="card">
    <div class="card-hd"><span class="ct">Quick Actions</span></div>
    <div class="card-body">
      <div class="btn-row">
        <button class="btn bc" id="qa-push"><span>‚¨Ü PUSH TO GITHUB</span></button>
        <button class="btn bg" id="qa-pull"><span>‚¨á PULL FROM GIST</span></button>
        <button class="btn ba" id="qa-export"><span>‚Üì EXPORT JSON</span></button>
        <button class="btn bp bsm" id="qa-import"><span>‚Üë IMPORT</span></button>
      </div>
    </div>
  </div>
  <div class="card">
    <div class="card-hd"><span class="ct">Activity Log</span><button class="btn br bsm" id="qa-clrlog"><span>CLEAR</span></button></div>
    <div class="card-body" style="padding:0"><div class="logbox" id="log-box"></div></div>
  </div>
</div>

<!-- SPLASH -->
<div class="panel" id="p-splash">
  <div class="pt"><h1><em>SPLASH</em> SCREEN</h1><p>Loading animation</p></div>
  <div class="card">
    <div class="card-hd"><span class="ct">Splash Content</span></div>
    <div class="card-body">
      <div class="fg"><label>Big Logo Text</label><input id="sp-logo" placeholder="NOVA" maxlength="12"/></div>
      <div class="fg"><label>Loading Tagline</label><input id="sp-tag" placeholder="Booting Neural Interface"/></div>
      <div class="fg"><label>Background Color</label><input id="sp-bg" placeholder="#04060f"/><div class="swatches" id="sp-sw"></div></div>
      <button class="btn bg bfw" id="save-splash"><span>SAVE SPLASH</span></button>
    </div>
  </div>
</div>

<!-- HERO -->
<div class="panel" id="p-hero">
  <div class="pt"><h1><em>HERO</em> SECTION</h1><p>Identity &amp; profile</p></div>
  <div class="card">
    <div class="card-hd"><span class="ct">Profile Photo / Logo</span></div>
    <div class="card-body">
      <div class="av-wrap">
        <div class="av-circle" id="av-circle">‚¨°</div>
        <div class="av-info">
          <p>Upload photo ‚Äî appears in hero orb and navbar</p>
          <button class="btn bc bsm" id="av-btn">üì∑ UPLOAD PHOTO</button>
          <input type="file" id="av-file" accept="image/*" style="display:none"/>
        </div>
      </div>
      <div class="fg"><label>Or paste image URL</label><input id="hero-avurl" placeholder="https://..."/></div>
      <div class="fg"><label>Fallback glyph (shown if no image)</label><input id="hero-glyph" placeholder="‚¨°" maxlength="4"/></div>
    </div>
  </div>
  <div class="card">
    <div class="card-hd"><span class="ct">Name &amp; Titles</span></div>
    <div class="card-body">
      <div class="f2">
        <div class="fg"><label>First Name</label><input id="hero-first" placeholder="ALEX" maxlength="20"/></div>
        <div class="fg"><label>Last Name</label><input id="hero-last" placeholder="NOVA" maxlength="20"/></div>
      </div>
      <div class="fg"><label>Professional Title</label><input id="hero-title" placeholder="Architect of Digital Futures"/></div>
      <div class="fg"><label>Top Tag Line</label><input id="hero-sub" placeholder="// FULL-STACK ¬∑ AI ¬∑ CREATIVE TECH"/></div>
      <div class="fg"><label>Hero Description</label><textarea id="hero-tagline" rows="3"></textarea></div>
      <div class="fg"><label>Availability Status</label>
        <select id="hero-avail"><option>OPEN TO WORK</option><option>FREELANCING</option><option>EMPLOYED</option><option>NOT AVAILABLE</option></select>
      </div>
    </div>
  </div>
  <div class="card">
    <div class="card-hd"><span class="ct">Stats Counter</span></div>
    <div class="card-body">
      <div class="f2">
        <div class="fg"><label>Projects</label><input type="number" id="stat-pj" placeholder="48"/></div>
        <div class="fg"><label>Clients</label><input type="number" id="stat-cl" placeholder="27"/></div>
        <div class="fg"><label>Years Exp</label><input type="number" id="stat-yr" placeholder="9"/></div>
        <div class="fg"><label>Commits</label><input type="number" id="stat-km" placeholder="12847"/></div>
      </div>
    </div>
  </div>
  <button class="btn bg bfw" id="save-hero"><span>SAVE HERO</span></button>
</div>

<!-- ABOUT -->
<div class="panel" id="p-about">
  <div class="pt"><h1><em>ABOUT</em> SECTION</h1><p>Bio, highlights, marquee</p></div>
  <div class="card">
    <div class="card-hd"><span class="ct">Bio Content</span></div>
    <div class="card-body">
      <div class="fg"><label>Section Heading</label><input id="ab-head" placeholder="ABOUT"/></div>
      <div class="fg"><label>Biography</label><textarea id="ab-bio" rows="5"></textarea></div>
      <div class="f2">
        <div class="fg"><label>Code ‚Äî Passion</label><input id="ab-pass" placeholder="Building the impossible"/></div>
        <div class="fg"><label>Code ‚Äî Focus</label><input id="ab-foc" placeholder="Performance + Aesthetics"/></div>
      </div>
    </div>
  </div>
  <div class="card">
    <div class="card-hd"><span class="ct">Highlights Grid</span></div>
    <div class="card-body">
      <div id="hl-list"></div>
      <div class="f2" style="margin-top:8px">
        <div class="fg"><label>Label</label><input id="hl-lbl" placeholder="Based In"/></div>
        <div class="fg"><label>Value</label><input id="hl-val" placeholder="Neo Tokyo"/></div>
      </div>
      <button class="btn bc bsm" id="add-hl"><span>+ ADD HIGHLIGHT</span></button>
    </div>
  </div>
  <div class="card">
    <div class="card-hd"><span class="ct">Marquee Keywords</span></div>
    <div class="card-body">
      <div class="fg"><label>Add Keyword</label><input id="mq-kw" placeholder="TYPESCRIPT"/></div>
      <button class="btn bc bsm" id="add-mq"><span>+ ADD</span></button>
      <div id="mq-list" style="margin-top:10px;display:flex;flex-wrap:wrap;gap:6px"></div>
    </div>
  </div>
  <button class="btn bg bfw" id="save-about"><span>SAVE ABOUT</span></button>
</div>

<!-- FOOTER -->
<div class="panel" id="p-footer">
  <div class="pt"><h1><em>FOOTER</em></h1><p>Bottom section</p></div>
  <div class="card">
    <div class="card-hd"><span class="ct">Footer Content</span></div>
    <div class="card-body">
      <div class="fg"><label>Logo Text</label><input id="ft-logo" placeholder="ALEX/NOVA" maxlength="20"/></div>
      <div class="fg"><label>Copyright Line</label><input id="ft-copy" placeholder="¬© 2087 Alex Nova ‚Äî All Rights Reserved"/></div>
      <div class="fg"><label>Tagline / Version</label><input id="ft-tag" placeholder="NOVA CORTEX PORTFOLIO v3.0"/></div>
    </div>
  </div>
  <div class="card">
    <div class="card-hd"><span class="ct">Footer Links</span></div>
    <div class="card-body">
      <div id="ftl-list"></div>
      <div class="f2" style="margin-top:8px">
        <div class="fg"><label>Label</label><input id="ftl-lbl" placeholder="GitHub"/></div>
        <div class="fg"><label>URL</label><input id="ftl-url" placeholder="https://github.com/..."/></div>
      </div>
      <button class="btn bc bsm" id="add-ftl"><span>+ ADD LINK</span></button>
    </div>
  </div>
  <button class="btn bg bfw" id="save-footer"><span>SAVE FOOTER</span></button>
</div>

<!-- SKILLS -->
<div class="panel" id="p-skills">
  <div class="pt"><h1><em>SKILLS</em></h1><p>Technical capabilities</p></div>
  <div class="card">
    <div class="card-hd"><span class="ct">Add Skill</span></div>
    <div class="card-body">
      <div class="f2">
        <div class="fg"><label>Name</label><input id="sk-nm" placeholder="TypeScript"/></div>
        <div class="fg"><label>Category</label>
          <select id="sk-cat"><option>Language</option><option>Frontend</option><option>Backend</option><option>DevOps</option><option>AI/ML</option><option>Systems</option><option>Web3</option><option>Tools</option><option>Graphics</option></select>
        </div>
      </div>
      <div class="fg"><label>Level: <span id="sk-lv-val">85</span>%</label>
        <input type="range" id="sk-lv" min="0" max="100" value="85"/>
        <div class="skb"><div class="skf" id="sk-lv-bar" style="width:85%;background:var(--c)"></div></div>
      </div>
      <div class="fg"><label>Color</label><input id="sk-col" placeholder="#3178c6"/><div class="swatches" id="sk-sw"></div></div>
      <button class="btn bc bfw" id="add-skill"><span>+ ADD SKILL</span></button>
    </div>
  </div>
  <div class="card">
    <div class="card-hd"><span class="ct">Skill List</span><span id="sk-cnt" style="font-family:var(--fm);font-size:.55rem;color:var(--mt)">0</span></div>
    <div class="card-body" id="sk-list"></div>
  </div>
</div>

<!-- PROJECTS -->
<div class="panel" id="p-projects">
  <div class="pt"><h1><em>PROJECTS</em></h1><p>Your work showcase</p></div>
  <div class="card">
    <div class="card-hd"><span class="ct">Add Project</span></div>
    <div class="card-body">
      <div class="fg"><label>Title</label><input id="pj-nm" placeholder="SYNAPSE AI"/></div>
      <div class="fg"><label>Subtitle</label><input id="pj-sub" placeholder="Neural interface platform"/></div>
      <div class="fg"><label>Description</label><textarea id="pj-desc" rows="3"></textarea></div>
      <div class="f2">
        <div class="fg"><label>Category</label>
          <select id="pj-cat"><option>AI/ML</option><option>Web3</option><option>Frontend</option><option>Backend</option><option>Systems</option><option>Tools</option><option>Graphics</option><option>Mobile</option></select>
        </div>
        <div class="fg"><label>Status</label>
          <select id="pj-st"><option>LIVE</option><option>BETA</option><option>OPEN SOURCE</option><option>TESTNET</option><option>WIP</option><option>ARCHIVED</option></select>
        </div>
      </div>
      <div class="f2">
        <div class="fg"><label>Year</label><input type="number" id="pj-yr" value="2025"/></div>
        <div class="fg"><label>Accent Color</label><input id="pj-col" placeholder="#00f0c8"/><div class="swatches" id="pj-sw"></div></div>
      </div>
      <div class="fg"><label>Tech Stack (comma-separated)</label><input id="pj-tc" placeholder="React, TypeScript, Node.js"/></div>
      <div class="sec-lbl">Metrics (up to 3)</div>
      <div class="f2">
        <div class="fg"><label>Key 1</label><input id="m1k" placeholder="users"/></div>
        <div class="fg"><label>Value 1</label><input id="m1v" placeholder="50K+"/></div>
        <div class="fg"><label>Key 2</label><input id="m2k" placeholder="uptime"/></div>
        <div class="fg"><label>Value 2</label><input id="m2v" placeholder="99.9%"/></div>
        <div class="fg"><label>Key 3</label><input id="m3k" placeholder="latency"/></div>
        <div class="fg"><label>Value 3</label><input id="m3v" placeholder="12ms"/></div>
      </div>
      <div class="tog-row">
        <div><div class="tog-lbl">Featured project</div><div class="tog-sub">Shows in top row</div></div>
        <label class="tog"><input type="checkbox" id="pj-ft" checked/><div class="tog-sl"></div></label>
      </div>
      <div class="fg" style="margin-top:12px"><label>Live URL</label><input id="pj-url" placeholder="https://..."/></div>
      <div class="fg"><label>GitHub URL</label><input id="pj-gh" placeholder="https://github.com/..."/></div>
      <button class="btn bc bfw" id="add-proj"><span>+ ADD PROJECT</span></button>
    </div>
  </div>
  <div class="card">
    <div class="card-hd"><span class="ct">Project List</span><span id="pj-cnt" style="font-family:var(--fm);font-size:.55rem;color:var(--mt)">0</span></div>
    <div class="card-body" id="pj-list"></div>
  </div>
</div>

<!-- EXPERIENCE -->
<div class="panel" id="p-experience">
  <div class="pt"><h1><em>EXPERIENCE</em></h1><p>Career timeline</p></div>
  <div class="card">
    <div class="card-hd"><span class="ct">Add Experience</span></div>
    <div class="card-body">
      <div class="fg"><label>Company</label><input id="ex-co" placeholder="ANTHROPIC NEXUS"/></div>
      <div class="fg"><label>Role / Title</label><input id="ex-ro" placeholder="Principal Engineer"/></div>
      <div class="fg"><label>Period</label><input id="ex-pe" placeholder="2023 ‚Äì Present"/></div>
      <div class="fg"><label>Description</label><textarea id="ex-desc" rows="3"></textarea></div>
      <div class="fg"><label>Key Highlight</label><input id="ex-hl" placeholder="Built architecture serving 500M+ requests/day"/></div>
      <button class="btn bc bfw" id="add-exp"><span>+ ADD EXPERIENCE</span></button>
    </div>
  </div>
  <div class="card">
    <div class="card-hd"><span class="ct">Experience List</span></div>
    <div class="card-body" id="ex-list"></div>
  </div>
</div>

<!-- CERTIFICATIONS -->
<div class="panel" id="p-certs">
  <div class="pt"><h1><em>CERTIFI</em>CATIONS</h1><p>Verified credentials</p></div>
  <div class="card">
    <div class="card-hd"><span class="ct">Add Certification</span></div>
    <div class="card-body">
      <div style="display:flex;gap:14px;align-items:flex-start;margin-bottom:12px">
        <div>
          <div class="cert-drop" id="cert-drop" onclick="g('cert-file').click()">üéñ<img id="cert-drop-img" src="" alt="" style="display:none"/></div>
          <input type="file" id="cert-file" accept="image/*" style="display:none"/>
          <div style="font-family:var(--fm);font-size:.5rem;color:var(--mt);margin-top:4px;text-align:center">Tap to upload</div>
        </div>
        <div style="flex:1">
          <div class="fg"><label>Certification Title</label><input id="ce-title" placeholder="AWS Solutions Architect"/></div>
          <div class="fg"><label>Issuing Organization</label><input id="ce-iss" placeholder="Amazon Web Services"/></div>
        </div>
      </div>
      <div class="f2">
        <div class="fg"><label>Category</label>
          <select id="ce-cat"><option>Cloud</option><option>DevOps</option><option>Language</option><option>Security</option><option>AI/ML</option><option>Web3</option><option>Architecture</option><option>Other</option></select>
        </div>
        <div class="fg"><label>Year</label><input id="ce-date" placeholder="2024"/></div>
      </div>
      <div class="fg"><label>Credential ID</label><input id="ce-id" placeholder="AWS-SAA-2024-001"/></div>
      <div class="fg"><label>Or Badge Image URL</label><input id="ce-url" placeholder="https://..."/></div>
      <div class="fg"><label>Accent Color</label><input id="ce-col" placeholder="#f0b429"/><div class="swatches" id="ce-sw"></div></div>
      <button class="btn bc bfw" id="add-cert"><span>+ ADD CERTIFICATION</span></button>
    </div>
  </div>
  <div class="card">
    <div class="card-hd"><span class="ct">Certification List</span></div>
    <div class="card-body" id="ce-list"></div>
  </div>
</div>

<!-- CONTACT -->
<div class="panel" id="p-contact">
  <div class="pt"><h1><em>CONTACT</em> INFO</h1><p>How people reach you</p></div>
  <div class="card">
    <div class="card-hd"><span class="ct">Contact Details</span></div>
    <div class="card-body">
      <div class="fg"><label>‚úâ Email</label><input id="ct-email" type="email" placeholder="you@email.com"/></div>
      <div class="fg"><label>‚òé Phone</label><input id="ct-phone" placeholder="+1 (555) 0100"/></div>
      <div class="fg"><label>‚å• GitHub URL</label><input id="ct-gh" placeholder="github.com/username"/></div>
      <div class="fg"><label>‚óà LinkedIn URL</label><input id="ct-li" placeholder="linkedin.com/in/username"/></div>
      <div class="fg"><label>‚óá Twitter / X</label><input id="ct-tw" placeholder="@username"/></div>
      <div class="fg"><label>‚äï Location</label><input id="ct-loc" placeholder="San Francisco, CA"/></div>
      <div class="fg"><label>Contact Intro Paragraph</label><textarea id="ct-intro" rows="3"></textarea></div>
      <button class="btn bg bfw" id="save-contact"><span>SAVE CONTACT INFO</span></button>
    </div>
  </div>
</div>

<!-- INBOX -->
<div class="panel" id="p-inbox">
  <div class="pt"><h1><em>INBOX</em></h1><p>Contact form messages</p></div>
  <div class="card">
    <div class="card-hd"><span class="ct">Messages</span><button class="btn br bsm" id="clr-msgs"><span>CLEAR ALL</span></button></div>
    <div class="card-body" id="inbox-body">
      <div style="font-family:var(--fm);font-size:.63rem;color:var(--mt);text-align:center;padding:30px">No messages yet</div>
    </div>
  </div>
</div>

<!-- SETTINGS -->
<div class="panel" id="p-settings">
  <div class="pt"><h1><em>SETTINGS</em></h1><p>GitHub sync &amp; security</p></div>
  <div class="card">
    <div class="card-hd"><span class="ct">GitHub Configuration</span></div>
    <div class="card-body">
      <div class="cfg-note" id="cfg-note">Configure GitHub to sync your portfolio across all devices. On PUSH, a <strong>data.json</strong> file is written to your repo ‚Äî portfolio.html reads it from any device worldwide.</div>
      <div class="cfg-box">
        <div class="cfg-row"><span class="cfg-lbl">Status</span><span class="cfg-val" id="cfg-status">Not connected</span></div>
        <div class="cfg-row"><span class="cfg-lbl">Username</span><span class="cfg-val" id="cfg-user">‚Äî</span></div>
        <div class="cfg-row"><span class="cfg-lbl">Repo</span><span class="cfg-val" id="cfg-repo">‚Äî</span></div>
        <div class="cfg-row"><span class="cfg-lbl">Gist ID</span><span class="cfg-val" id="cfg-gid">‚Äî</span></div>
        <div class="cfg-row"><span class="cfg-lbl">Gist Raw URL</span><span class="cfg-val" id="cfg-datajson" style="font-size:.5rem;word-break:break-all;text-align:left">‚Äî</span></div>
        <div class="cfg-row"><span class="cfg-lbl">raw.github URL</span><span class="cfg-val" id="cfg-rawrepo" style="font-size:.5rem;word-break:break-all;text-align:left">‚Äî</span></div>
      </div>
      <div class="fg"><label>GitHub Token (ghp_... needs gist + public_repo scope)</label><input type="password" id="cfg-tok" placeholder="ghp_xxxxxxxxxxxxxxxxxxxx"/></div>
      <div class="fg"><label>GitHub Username</label><input id="cfg-uname" placeholder="yourusername"/></div>
      <div class="fg"><label>Repo Name (e.g. yourusername.github.io)</label><input id="cfg-repo-in" placeholder="yourusername.github.io"/></div>
      <div class="fg"><label>Gist ID (auto-filled after first push)</label><input id="cfg-gid-in" placeholder="Leave blank ‚Äî auto-created"/></div>
      <div class="btn-row">
        <button class="btn bg" id="cfg-save"><span>SAVE CONFIG</span></button>
        <button class="btn bc" id="cfg-push"><span>‚¨Ü PUSH NOW</span></button>
      </div>
      <div class="btn-row" style="margin-top:6px">
        <button class="btn" id="cfg-pull"><span>‚¨á PULL FROM GIST</span></button>
        <button class="btn bp bsm" id="cfg-pull-dj"><span>‚¨á PULL data.json</span></button>
      </div>
      <div style="font-family:var(--fm);font-size:.56rem;color:var(--mt);margin-top:8px;line-height:1.7">üí° On mobile: fill Username+Repo above ‚Üí tap <strong style="color:var(--c)">PULL data.json</strong> to load all your portfolio data instantly.</div>
    </div>
  </div>
  <div class="card">
    <div class="card-hd"><span class="ct">Security</span></div>
    <div class="card-body">
      <p style="font-family:var(--fm);font-size:.62rem;color:var(--mt);margin-bottom:12px;line-height:1.6">Password hashed with SHA-256 ‚Äî never sent anywhere.</p>
      <button class="btn ba bfw" id="change-pw"><span>üîë CHANGE PASSWORD</span></button>
    </div>
  </div>
  <div class="card">
    <div class="card-hd"><span class="ct">Data Management</span></div>
    <div class="card-body">
      <div class="btn-row">
        <button class="btn ba" id="qa-export2"><span>‚Üì EXPORT JSON</span></button>
        <button class="btn bp bsm" id="qa-import2"><span>‚Üë IMPORT JSON</span></button>
      </div>
    </div>
  </div>
  <div class="card">
    <div class="card-hd"><span class="ct">Danger Zone</span></div>
    <div class="card-body">
      <div class="btn-row">
        <button class="btn br" id="reset-data"><span>‚úï RESET ALL DATA</span></button>
        <button class="btn br bsm" id="disc-gh"><span>DISCONNECT GH</span></button>
      </div>
    </div>
  </div>
</div>

</div><!-- #main -->

<!-- ‚ïê‚ïê MOBILE BOTTOM NAV ‚ïê‚ïê -->
<nav id="botnav">
  <button class="bn on" id="bn-dash" onclick="navTo('dash')"><div class="bn-i">‚óâ</div><div class="bn-l">Home</div></button>
  <button class="bn" id="bn-hero" onclick="navTo('hero')"><div class="bn-i">‚óà</div><div class="bn-l">Hero</div></button>
  <button class="bn" id="bn-inbox" onclick="navTo('inbox')"><div class="bn-i">üì¨</div><div class="bn-l">Inbox</div><div class="bn-bdg" id="bn-badge">0</div></button>
  <button class="bn" id="bn-settings" onclick="navTo('settings')"><div class="bn-i">‚öô</div><div class="bn-l">Settings</div></button>
  <button class="bn" id="bn-menu" onclick="openMenu()"><div class="bn-i">‚ò∞</div><div class="bn-l">All</div></button>
</nav>

<!-- ‚ïê‚ïê MOBILE FULL-SCREEN MENU ‚ïê‚ïê -->
<div id="mob-menu">
  <div id="mob-menu-scroll">
    <div class="mm-hd">ALL SECTIONS ‚Äî tap to navigate</div>
    <div class="mm-grp">
      <div class="mm-gl">Overview</div>
      <button class="mm-item" data-p="dash"><span class="mm-i">‚óâ</span><span class="mm-l">Dashboard</span></button>
    </div>
    <div class="mm-grp">
      <div class="mm-gl">Appearance</div>
      <button class="mm-item" data-p="splash"><span class="mm-i">‚ú¶</span><span class="mm-l">Splash Screen</span></button>
      <button class="mm-item" data-p="hero"><span class="mm-i">‚óà</span><span class="mm-l">Hero &amp; Identity</span></button>
      <button class="mm-item" data-p="about"><span class="mm-i">‚óê</span><span class="mm-l">About Section</span></button>
      <button class="mm-item" data-p="footer"><span class="mm-i">‚ñ£</span><span class="mm-l">Footer</span></button>
    </div>
    <div class="mm-grp">
      <div class="mm-gl">Content</div>
      <button class="mm-item" data-p="skills"><span class="mm-i">‚óá</span><span class="mm-l">Skills</span><span class="mm-c" id="mm-sk">0</span></button>
      <button class="mm-item" data-p="projects"><span class="mm-i">‚óÜ</span><span class="mm-l">Projects</span><span class="mm-c" id="mm-pj">0</span></button>
      <button class="mm-item" data-p="experience"><span class="mm-i">‚óé</span><span class="mm-l">Experience</span><span class="mm-c" id="mm-ex">0</span></button>
      <button class="mm-item" data-p="certs"><span class="mm-i">üéñ</span><span class="mm-l">Certifications</span><span class="mm-c" id="mm-ce">0</span></button>
      <button class="mm-item" data-p="contact"><span class="mm-i">‚úâ</span><span class="mm-l">Contact Info</span></button>
    </div>
    <div class="mm-grp">
      <div class="mm-gl">System</div>
      <button class="mm-item" data-p="inbox"><span class="mm-i">üì¨</span><span class="mm-l">Inbox</span><span class="mm-c r" id="mm-msg" style="display:none">0</span></button>
      <button class="mm-item" data-p="settings"><span class="mm-i">‚öô</span><span class="mm-l">Settings</span></button>
    </div>
  </div>
  <div id="mob-menu-actions">
    <button class="btn bc" style="flex:2" onclick="pushToGitHub();closeMenu()"><span>‚¨Ü PUSH TO GITHUB</span></button>
    <button class="btn" style="flex:1" onclick="window.open('portfolio.html','_blank');closeMenu()"><span>‚Üó VIEW</span></button>
    <button class="btn br bsm" onclick="closeMenu()"><span>‚úï</span></button>
  </div>
</div>

<script>
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// UTILS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function uid(){return 'x'+Math.random().toString(36).slice(2,9)}
function g(id){return document.getElementById(id)}
function v(id){var e=g(id);return e?e.value.trim():''}
function toast(msg,type,dur){
  var t=g('toast');t.textContent=msg;t.className=type||'in';t.style.display='block';
  clearTimeout(t._t);t._t=setTimeout(function(){t.style.display='none'},dur||3000)
}
function log(msg,cls){
  var box=g('log-box');if(!box)return;
  var d=document.createElement('div');d.className='le';
  d.innerHTML='<span class="lt">'+new Date().toTimeString().slice(0,8)+'</span><span class="lm '+(cls||'')+'">'+msg+'</span>';
  box.insertBefore(d,box.firstChild);
  if(box.children.length>80)box.removeChild(box.lastChild)
}
function empty(t){return '<div style="font-family:var(--fm);font-size:.62rem;color:var(--mt);padding:24px;text-align:center">'+t+'</div>'}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// SHA-256
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
async function sha256(s){
  var b=await crypto.subtle.digest('SHA-256',new TextEncoder().encode(s));
  return Array.from(new Uint8Array(b)).map(function(x){return x.toString(16).padStart(2,'0')}).join('')
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// LOCK SCREEN
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
var _att=0,_until=0;
function sesOK(){try{var s=JSON.parse(sessionStorage.getItem('nvs')||'{}');return s.ok&&s.e>Date.now()}catch(e){return false}}
function grSes(){sessionStorage.setItem('nvs',JSON.stringify({ok:true,e:Date.now()+8*3600000}))}

async function tryUnlock(){
  if(Date.now()<_until){g('lk-err').textContent='Locked ‚Äî wait '+Math.ceil((_until-Date.now())/1000)+'s';return}
  var pw=g('lk-pw').value;
  if(!pw){g('lk-err').textContent='Enter password';return}
  g('lk-btxt').textContent='VERIFYING‚Ä¶';
  var h=await sha256(pw),stored=localStorage.getItem('nova_pw');
  if(!stored){
    if(pw.length<6){g('lk-err').textContent='Min 6 characters';g('lk-btxt').textContent='SET PASSWORD';return}
    localStorage.setItem('nova_pw',h);
    g('lk-icon').textContent='‚úÖ';g('lk-btxt').textContent='PASSWORD SET!';
    setTimeout(function(){g('lock').classList.add('gone');grSes();bootAdmin()},400);return
  }
  if(h===stored){
    _att=0;g('lk-btxt').textContent='UNLOCKING‚Ä¶';
    setTimeout(function(){g('lock').classList.add('gone');grSes();bootAdmin()},300)
  }else{
    _att++;
    var inp=g('lk-pw');inp.value='';inp.classList.remove('shake');void inp.offsetWidth;inp.classList.add('shake');
    inp.addEventListener('animationend',function(){inp.classList.remove('shake')},{once:true});
    if(_att>=5){
      _until=Date.now()+30000;
      var iv=setInterval(function(){var r=Math.ceil((_until-Date.now())/1000);if(r<=0){clearInterval(iv);_att=0;g('lk-err').textContent=''}else g('lk-err').textContent='Locked ‚Äî wait '+r+'s'},500)
    }else g('lk-err').textContent='Wrong password ('+(5-_att)+' left)';
    g('lk-btxt').textContent=stored?'UNLOCK':'SET PASSWORD'
  }
}
g('lk-btn').addEventListener('click',tryUnlock);
g('lk-pw').addEventListener('keydown',function(e){if(e.key==='Enter')tryUnlock()});
g('lk-eye').addEventListener('click',function(){var i=g('lk-pw');i.type=i.type==='password'?'text':'password'});
(function(){
  var stored=localStorage.getItem('nova_pw');
  if(!stored){
    g('lk-title').textContent='SET YOUR PASSWORD';
    g('lk-hint').textContent='First time setup ‚Äî choose a strong password (min 6 chars)';
    g('lk-btxt').textContent='SET PASSWORD';g('lk-icon').textContent='‚öô';
    g('lk-note').textContent='SHA-256 hashed ¬∑ never leaves your device'
  }
  if(sesOK())g('lock').classList.add('gone')
})();

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// STATE ‚Äî default portfolio data
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
var S={
  splash:{logo:'NOVA',tagline:'Booting Neural Interface',bg:'#04060f'},
  hero:{firstName:'ALEX',lastName:'NOVA',subtitle:'// FULL-STACK ¬∑ AI ¬∑ CREATIVE TECH',title:'Architect of Digital Futures',tagline:'I build systems that think, interfaces that breathe, and code that matters.',avatarUrl:'',glyph:'‚¨°',availability:'OPEN TO WORK',stats:{projects:48,clients:27,yearsExp:9,commits:12847}},
  about:{heading:'ABOUT',bio:'A full-stack engineer obsessed with the intersection of performance and aesthetics.',passion:'Building the impossible',focus:'Performance + Aesthetics',highlights:[{id:uid(),label:'Based In',value:'Neo Tokyo'},{id:uid(),label:'Experience',value:'9 Years'},{id:uid(),label:'Speciality',value:'Full-Stack'},{id:uid(),label:'Status',value:'Available'}]},
  marqueeItems:['TYPESCRIPT','RUST','PYTHON','REACT','NODE.JS','WEBGL','AI/ML','KUBERNETES'],
  skills:[{id:uid(),name:'TypeScript',level:95,category:'Language',color:'#3178c6'},{id:uid(),name:'React',level:97,category:'Frontend',color:'#61dafb'},{id:uid(),name:'Node.js',level:93,category:'Backend',color:'#68a063'},{id:uid(),name:'Python',level:90,category:'Language',color:'#ffd43b'}],
  projects:[{id:uid(),title:'SYNAPSE AI',subtitle:'Neural interface platform',description:'AI inference platform.',tech:['Rust','React'],category:'AI/ML',status:'LIVE',year:2025,metrics:{users:'50K+',uptime:'99.9%'},color:'#00f0c8',featured:true,liveUrl:'',githubUrl:''},{id:uid(),title:'PHANTOM GRID',subtitle:'Compute mesh',description:'P2P GPU compute.',tech:['Solidity','Rust'],category:'Web3',status:'LIVE',year:2024,metrics:{nodes:'8.2K'},color:'#9d5cff',featured:true,liveUrl:'',githubUrl:''}],
  experience:[{id:uid(),company:'ANTHROPIC',role:'Principal Engineer',period:'2023‚ÄìPresent',description:'AI inference infrastructure.',highlight:'500M+ AI requests/day'},{id:uid(),company:'STARTUP',role:'Senior Engineer',period:'2020‚Äì2023',description:'0 to 2M users.',highlight:'$45M ARR in 24 months'}],
  certifications:[{id:uid(),title:'AWS Solutions Architect',issuer:'Amazon Web Services',date:'2024',credentialId:'AWS-SAA-2024',category:'Cloud',color:'#f0b429',image:''},{id:uid(),title:'CKA',issuer:'CNCF',date:'2023',credentialId:'CKA-2023',category:'DevOps',color:'#326ce5',image:''}],
  contact:{email:'hello@email.com',phone:'+1 (555) 0100',github:'github.com/username',linkedin:'linkedin.com/in/username',twitter:'@username',location:'San Francisco, CA',intro:'Whether it\'s a product idea, a collaboration, or just a conversation about the future ‚Äî response guaranteed within 24 hours.'},
  footer:{logo:'YOUR/NAME',copyright:'¬© 2025 Your Name ‚Äî All Rights Reserved',tagline:'PORTFOLIO v1.0',links:[{id:uid(),label:'GitHub',url:'#'},{id:uid(),label:'LinkedIn',url:'#'}]},
  contacts:[]
};
var TOKEN='',GH_USER='',GH_REPO='',GIST_ID='';

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// STORAGE
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function saveLocal(){localStorage.setItem('portfolio_state',JSON.stringify(S))}
function loadLocal(){
  try{
    var d=JSON.parse(localStorage.getItem('portfolio_state')||'{}');
    ['splash','hero','about','marqueeItems','skills','projects','experience','certifications','contact','footer','contacts'].forEach(function(k){if(d[k]!==undefined)S[k]=d[k]})
  }catch(e){}
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// NAVIGATION ‚Äî single source of truth
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
var PIN={dash:'bn-dash',hero:'bn-hero',inbox:'bn-inbox',settings:'bn-settings'};

function navTo(name){
  // Panels
  document.querySelectorAll('.panel').forEach(function(p){p.classList.remove('on')});
  var panel=g('p-'+name);if(!panel)return;
  panel.classList.add('on');
  // Desktop sidebar
  document.querySelectorAll('.sb-btn').forEach(function(b){b.classList.toggle('on',b.dataset.p===name)});
  // Mobile bottom nav
  document.querySelectorAll('.bn').forEach(function(b){b.classList.remove('on')});
  var pid=PIN[name];
  if(pid&&g(pid))g(pid).classList.add('on');
  else{var m=g('bn-menu');if(m)m.classList.add('on')}
  // Mobile menu items
  document.querySelectorAll('.mm-item').forEach(function(b){b.classList.toggle('on',b.dataset.p===name)});
  // Load form / render
  if(name==='splash')loadSplashForm();
  else if(name==='hero')loadHeroForm();
  else if(name==='about')loadAboutForm();
  else if(name==='footer')loadFooterForm();
  else if(name==='contact')loadContactForm();
  else if(name==='inbox')renderInbox();
  else if(name==='settings')fillSettings();
  // Scroll top
  var m=g('main');if(m)m.scrollTop=0;window.scrollTo(0,0)
}

document.querySelectorAll('.sb-btn').forEach(function(b){b.addEventListener('click',function(){navTo(b.dataset.p)})});
document.querySelectorAll('.mm-item').forEach(function(b){b.addEventListener('click',function(){navTo(b.dataset.p);closeMenu()})});

// Mobile menu open/close
function openMenu(){g('mob-menu').classList.add('open');document.body.style.overflow='hidden'}
function closeMenu(){g('mob-menu').classList.remove('open');document.body.style.overflow=''}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// SYNC COUNTS ‚Äî updates ALL nav elements
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function syncCounts(){
  var sk=S.skills.length,pj=S.projects.length,ex=S.experience.length,ce=S.certifications.length;
  var ms=(S.contacts||[]).length,unread=(S.contacts||[]).filter(function(m){return !m.read}).length;
  // Dashboard
  g('d-sk').textContent=sk;g('d-pj').textContent=pj;g('d-ex').textContent=ex;g('d-ce').textContent=ce;g('d-ms').textContent=ms;
  // Desktop sidebar
  g('sb-sk').textContent=sk;g('sb-pj').textContent=pj;g('sb-ex').textContent=ex;g('sb-ce').textContent=ce;
  g('sb-msg').textContent=unread;
  // Mobile menu
  if(g('mm-sk'))g('mm-sk').textContent=sk;if(g('mm-pj'))g('mm-pj').textContent=pj;
  if(g('mm-ex'))g('mm-ex').textContent=ex;if(g('mm-ce'))g('mm-ce').textContent=ce;
  var mmm=g('mm-msg');if(mmm){mmm.textContent=unread;mmm.style.display=unread>0?'flex':'none'}
  // Mobile badge
  var bnb=g('bn-badge');if(bnb){bnb.textContent=unread;bnb.className='bn-bdg'+(unread>0?' on':'')}
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// SYNC STATUS display in dashboard
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function showSyncStatus(msg,type){
  var el=g('sync-status');if(!el)return;
  el.innerHTML='<div class="sync-bar '+type+'">'+msg+'</div>'
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// GITHUB
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function setGHStatus(ok,user){
  var dot=g('gh-dot'),txt=g('gh-txt'),bar=g('gh-bar');
  var c=ok?'var(--grn)':'var(--mt)';
  dot.style.background=c;
  txt.textContent=ok?('‚úì '+user):'NOT CONNECTED';
  bar.style.borderColor=ok?'rgba(0,230,118,.3)':'rgba(192,208,228,.15)';
  bar.style.color=ok?'var(--grn)':'var(--mt)'
}

async function verifyGH(){
  if(!TOKEN){setGHStatus(false);return false}
  try{
    var r=await fetch('https://api.github.com/user',{headers:{Authorization:'token '+TOKEN,Accept:'application/vnd.github.v3+json'}});
    var j=await r.json();
    if(j.login){
      if(!GH_USER)GH_USER=j.login;
      setGHStatus(true,j.login);log('GitHub: @'+j.login,'ok');return true
    }
  }catch(e){}
  setGHStatus(false);log('GitHub auth failed','er');return false
}

// ‚îÄ‚îÄ PUSH: writes data.json to repo AND creates/updates Gist ‚îÄ‚îÄ
async function pushToGitHub(){
  saveLocal();
  if(!TOKEN){toast('No GitHub token ‚Äî saved locally only','in');log('Saved locally (no token)');return}

  // Strip large base64 images before Gist push (prevents truncation)
  // Images stay in localStorage; data.json on GitHub Pages keeps full data
  function stripB64(arr){
    if(!arr)return arr;
    return arr.map(function(x){
      var copy=Object.assign({},x);
      if(copy.image&&copy.image.startsWith('data:'))copy.image='';
      return copy;
    });
  }
  var heroClean=Object.assign({},S.hero);
  if(heroClean.avatarUrl&&heroClean.avatarUrl.startsWith('data:'))heroClean.avatarUrl='';
  // ‚îÄ‚îÄ Step 1: Push to Gist FIRST so we get the Gist ID and raw URL ‚îÄ‚îÄ
  // Then embed those URLs in data.json before pushing to repo.
  // This way data.json always contains the raw URLs that bypass CDN.
  var gistRawUrl='';var rawRepoUrl='';
  try{
    toast('Pushing to Gist‚Ä¶','in');
    var gMethod=GIST_ID?'PATCH':'POST';
    var gUrl=GIST_ID?'https://api.github.com/gists/'+GIST_ID:'https://api.github.com/gists';
    // First push: content without raw URLs (we don't have them yet)
    var dataForGist={
      _meta:{gistId:GIST_ID,pushedAt:new Date().toISOString(),user:GH_USER,repo:GH_REPO},
      splash:S.splash,hero:heroClean,about:S.about,marqueeItems:S.marqueeItems,
      skills:S.skills,projects:S.projects,experience:S.experience,
      certifications:stripB64(S.certifications),contact:S.contact,footer:S.footer
    };
    var gr=await fetch(gUrl,{
      method:gMethod,
      headers:{Authorization:'token '+TOKEN,'Content-Type':'application/json',Accept:'application/vnd.github.v3+json'},
      body:JSON.stringify({description:'Nova Portfolio Data',public:true,files:{'portfolio.json':{content:JSON.stringify(dataForGist,null,2)}}})
    });
    var gj=await gr.json();
    if(gj.id){
      if(!GIST_ID){GIST_ID=gj.id;localStorage.setItem('portfolio_gist_id',GIST_ID)}
      // ‚òÖ THE KEY URLS ‚Äî these bypass ALL CDN caching on all devices
      gistRawUrl='https://gist.githubusercontent.com/'+GH_USER+'/'+GIST_ID+'/raw/portfolio.json';
      rawRepoUrl=GH_USER&&GH_REPO?'https://raw.githubusercontent.com/'+GH_USER+'/'+GH_REPO+'/main/data.json':'';
      localStorage.setItem('portfolio_gist_raw_url',gistRawUrl);
      if(rawRepoUrl)localStorage.setItem('portfolio_raw_repo_url',rawRepoUrl);
      if(g('cfg-gid'))g('cfg-gid').textContent=GIST_ID;
      if(g('cfg-gid-in'))g('cfg-gid-in').value=GIST_ID;
      log('‚úì Gist: '+GIST_ID,'ok');
      // Update Gist again with the raw URLs embedded in _meta
      dataForGist._meta.gistRawUrl=gistRawUrl;
      dataForGist._meta.rawRepoUrl=rawRepoUrl;
      var gr2=await fetch('https://api.github.com/gists/'+GIST_ID,{
        method:'PATCH',
        headers:{Authorization:'token '+TOKEN,'Content-Type':'application/json',Accept:'application/vnd.github.v3+json'},
        body:JSON.stringify({files:{'portfolio.json':{content:JSON.stringify(dataForGist,null,2)}}})
      });
      log('‚úì Gist updated with raw URLs','ok')
    }
  }catch(e){log('Gist push error: '+e.message,'er')}

  // ‚îÄ‚îÄ Step 2: Build final data.json WITH raw URLs embedded, push to repo ‚îÄ‚îÄ
  var data={
    _meta:{
      gistId:GIST_ID,
      gistRawUrl:gistRawUrl,    // ‚òÖ portfolio.html uses this to bypass CDN
      rawRepoUrl:rawRepoUrl,    // ‚òÖ portfolio.html uses this to bypass CDN
      pushedAt:new Date().toISOString(),
      user:GH_USER,repo:GH_REPO
    },
    splash:S.splash,hero:heroClean,about:S.about,marqueeItems:S.marqueeItems,
    skills:S.skills,projects:S.projects,experience:S.experience,
    certifications:stripB64(S.certifications),contact:S.contact,footer:S.footer
  };
  var jsonStr=JSON.stringify(data,null,2);
  var pushed=!!gistRawUrl;  // mark pushed if Gist succeeded

  if(GH_USER&&GH_REPO){
    try{
      toast('Pushing data.json to repo‚Ä¶','in');
      var existResp=await fetch('https://api.github.com/repos/'+GH_USER+'/'+GH_REPO+'/contents/data.json',{
        headers:{Authorization:'token '+TOKEN,Accept:'application/vnd.github.v3+json'}
      });
      var sha=null;
      if(existResp.ok){var ef=await existResp.json();sha=ef.sha}
      var b64=btoa(unescape(encodeURIComponent(jsonStr)));
      // Try main branch first, then master
      var branches=['main','master'];
      for(var bi=0;bi<branches.length;bi++){
        var body={message:'Update portfolio data',content:b64,branch:branches[bi]};
        if(sha)body.sha=sha;
        var putResp=await fetch('https://api.github.com/repos/'+GH_USER+'/'+GH_REPO+'/contents/data.json',{
          method:'PUT',
          headers:{Authorization:'token '+TOKEN,'Content-Type':'application/json',Accept:'application/vnd.github.v3+json'},
          body:JSON.stringify(body)
        });
        if(putResp.ok){
          pushed=true;
          log('data.json pushed to '+branches[bi]+' branch ‚úì','ok');
          break
        }else{
          var errj=await putResp.json();
          log('Branch '+branches[bi]+' failed: '+errj.message,'er')
        }
      }
    }catch(e){log('Repo push error: '+e.message,'er')}
  }

  if(pushed){
    g('d-sv').textContent=new Date().toLocaleTimeString();
    var rawUrl=localStorage.getItem('portfolio_gist_raw_url')||'';
    var rawRepo=localStorage.getItem('portfolio_raw_repo_url')||'';
    var msg='‚úì Pushed at '+new Date().toLocaleTimeString()+'<br>';
    if(rawRepo)msg+='üì¶ data.json ‚Üí '+rawRepo+'<br>';
    if(rawUrl)msg+='‚ö° Gist raw ‚Üí '+rawUrl+'<br>';
    msg+='üì± Mobile/any device will see changes on next portfolio refresh';
    showSyncStatus(msg,'ok')
  }else if(!GH_USER||!GH_REPO){
    toast('Saved locally. Go to Settings to add GitHub Username + Repo.','in');
    showSyncStatus('Saved locally only ‚Äî go to Settings and fill in GitHub Username + Repo Name to sync across all devices','in')
  }
}

// ‚îÄ‚îÄ Pull a PUBLIC Gist by ID without auth token ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
async function pullGistPublic(gistId){
  toast('Pulling Gist (public)‚Ä¶','in');log('Pulling public Gist '+gistId+'‚Ä¶');
  try{
    // Use unauthenticated API call for public gists
    var r=await fetch('https://api.github.com/gists/'+gistId,{
      headers:{Accept:'application/vnd.github.v3+json'}
    });
    if(!r.ok)throw new Error('HTTP '+r.status+' ‚Äî Gist must be public');
    var j=await r.json();
    var fo=j.files&&j.files['portfolio.json'];
    if(!fo)throw new Error('portfolio.json not in Gist');
    var raw;
    if(fo.truncated||!fo.content){
      var rr=await fetch(fo.raw_url);
      if(!rr.ok)throw new Error('Raw URL fetch failed');
      raw=await rr.text()
    }else raw=fo.content;
    if(!raw||!raw.trim())throw new Error('Gist is empty');
    var d=JSON.parse(raw);
    ['splash','hero','about','marqueeItems','skills','projects','experience','certifications','contact','footer'].forEach(function(k){if(d[k])S[k]=d[k]});
    ['skills','projects','experience','certifications'].forEach(function(k){
      if(Array.isArray(S[k]))S[k]=S[k].map(function(x){return Object.assign({id:uid()},x)})
    });
    saveLocal();renderSkills();renderProjects();renderExp();renderCerts();syncCounts();
    var sum='‚úì Pulled public Gist ‚Äî '+S.skills.length+' skills, '+S.projects.length+' projects';
    toast(sum,'ok',4000);log(sum,'ok');showSyncStatus(sum,'ok')
  }catch(e){
    toast('Public Gist pull failed: '+e.message,'er',5000);
    log('Public pull failed: '+e.message,'er')
  }
}

// ‚îÄ‚îÄ PULL: smart routing ‚Äî Gist ‚Üí data.json ‚Üí error ‚îÄ‚îÄ
async function pullFromGist(){
  // No config at all
  if(!TOKEN&&!GIST_ID&&(!GH_USER||!GH_REPO)){
    toast('Go to Settings ‚Üí enter your GitHub token, username, and repo','er',6000);return
  }
  // Have Gist ID ‚Üí pull from Gist
  if(GIST_ID&&TOKEN){
    // fall through to Gist pull below
  } else if(GH_USER&&GH_REPO){
    // Have repo config but no Gist ID ‚Üí pull data.json (will discover Gist ID)
    await pullFromDataJson();return
  } else if(GIST_ID&&!TOKEN){
    // Have Gist ID but no token ‚Üí try public raw URL
    await pullGistPublic(GIST_ID);return
  } else {
    toast('Enter GitHub token + repo in Settings first','er',5000);return
  }
  if(!TOKEN){toast('No GitHub token ‚Äî enter it in Settings','er');return}
  if(!GIST_ID){toast('No Gist ID yet ‚Äî push first, or enter repo in Settings to pull data.json','er',5000);return}
  toast('Pulling from Gist‚Ä¶','in');log('Pulling from Gist '+GIST_ID+'‚Ä¶');
  try{
    var r=await fetch('https://api.github.com/gists/'+GIST_ID,{
      headers:{Authorization:'token '+TOKEN,Accept:'application/vnd.github.v3+json'}
    });
    if(!r.ok){var e=await r.json();throw new Error(e.message||'HTTP '+r.status)}
    var j=await r.json();
    var fileObj=j.files&&j.files['portfolio.json'];
    if(!fileObj)throw new Error('portfolio.json not found in Gist. Push your data first using ‚¨Ü PUSH TO GITHUB button.');
    var raw;
    if(fileObj.truncated||!fileObj.content){
      // Large file ‚Äî fetch from raw_url (try with auth, fallback without)
      log('File truncated ‚Äî fetching raw URL‚Ä¶','in');
      var rr=await fetch(fileObj.raw_url,{headers:{Authorization:'token '+TOKEN}});
      if(!rr.ok){
        // Try without auth (public gist)
        rr=await fetch(fileObj.raw_url);
      }
      if(!rr.ok)throw new Error('Raw fetch failed (HTTP '+rr.status+'). Is the Gist public?');
      raw=await rr.text()
    }else{
      raw=fileObj.content
    }
    if(!raw||!raw.trim())throw new Error('Gist file is empty. Go to Dashboard ‚Üí PUSH TO GITHUB to save data first.');
    var d=JSON.parse(raw);
    ['splash','hero','about','marqueeItems','skills','projects','experience','certifications','contact','footer'].forEach(function(k){if(d[k])S[k]=d[k]});
    ['skills','projects','experience','certifications'].forEach(function(k){
      if(Array.isArray(S[k]))S[k]=S[k].map(function(x){return Object.assign({id:uid()},x)})
    });
    saveLocal();
    // Re-render all lists so changes are visible immediately
    renderSkills();renderProjects();renderExp();renderCerts();syncCounts();
    // Re-render current panel form if open
    var curPanel=document.querySelector('.panel.on');
    if(curPanel){
      var pname=curPanel.id.replace('p-','');
      if(pname==='splash')loadSplashForm();
      else if(pname==='hero')loadHeroForm();
      else if(pname==='about')loadAboutForm();
      else if(pname==='footer')loadFooterForm();
      else if(pname==='contact')loadContactForm();
      else if(pname==='inbox')renderInbox();
    }
    var summary='‚úì Pulled from Gist ‚Äî '+S.skills.length+' skills, '+S.projects.length+' projects, '+S.certifications.length+' certs, '+S.experience.length+' experience';
    toast(summary,'ok',5000);
    log(summary,'ok');
    showSyncStatus(summary+' ‚Äî pulled at '+new Date().toLocaleTimeString(),'ok')
  }catch(e){
    var msg=e.message||'Unknown error';
    toast('Pull failed: '+msg,'er',5000);log('Pull failed: '+msg,'er');
    showSyncStatus('‚úó Pull failed: '+msg,'er')
  }
}

// Pull from data.json on GitHub Pages (works on any device without token)
async function pullFromDataJson(){
  if(!GH_USER||!GH_REPO){toast('Set GitHub Username + Repo in Settings','er');return}
  // Build data.json URL
  var url='https://'+GH_USER+'.github.io/data.json';
  if(!GH_REPO.endsWith('.github.io'))url='https://'+GH_USER+'.github.io/'+GH_REPO+'/data.json';
  toast('Pulling from GitHub Pages‚Ä¶','in');log('Fetching '+url+'‚Ä¶');
  try{
    var r=await fetch(url+'?_='+Date.now(),{cache:'no-cache'});
    if(!r.ok)throw new Error('HTTP '+r.status+' from '+url+'. Have you pushed at least once?');
    var d=await r.json();
    // Extract gistId from _meta so Gist pull works on any device
    if(d._meta&&d._meta.gistId&&!GIST_ID){
      GIST_ID=d._meta.gistId;
      localStorage.setItem('portfolio_gist_id',GIST_ID);
      if(g('cfg-gid-in'))g('cfg-gid-in').value=GIST_ID;
      if(g('cfg-gid'))g('cfg-gid').textContent=GIST_ID;
      log('Gist ID discovered from data.json: '+GIST_ID,'ok')
    }
    if(d._meta&&d._meta.user&&!GH_USER){GH_USER=d._meta.user;localStorage.setItem('portfolio_gh_user',GH_USER)}
    if(d._meta&&d._meta.repo&&!GH_REPO){GH_REPO=d._meta.repo;localStorage.setItem('portfolio_gh_repo',GH_REPO)}
    ['splash','hero','about','marqueeItems','skills','projects','experience','certifications','contact','footer'].forEach(function(k){if(d[k])S[k]=d[k]});
    ['skills','projects','experience','certifications'].forEach(function(k){
      if(Array.isArray(S[k]))S[k]=S[k].map(function(x){return Object.assign({id:uid()},x)})
    });
    saveLocal();
    renderSkills();renderProjects();renderExp();renderCerts();syncCounts();
    fillSettings();
    var sum='‚úì Pulled from GitHub Pages ‚Äî '+S.skills.length+' skills, '+S.projects.length+' projects, '+S.certifications.length+' certs';
    toast(sum,'ok',5000);log(sum,'ok');showSyncStatus(sum,'ok')
  }catch(e){
    var msg=e.message||String(e);
    toast('Pull failed: '+msg,'er',6000);
    log('data.json pull failed: '+msg,'er');
    showSyncStatus('‚úó Pull failed: '+msg+'. Make sure you pushed from desktop first.','er')
  }
}

function exportJSON(){
  var data={splash:S.splash,hero:S.hero,about:S.about,marqueeItems:S.marqueeItems,skills:S.skills,projects:S.projects,experience:S.experience,certifications:S.certifications,contact:S.contact,footer:S.footer};
  var blob=new Blob([JSON.stringify(data,null,2)],{type:'application/json'});
  var a=document.createElement('a');a.href=URL.createObjectURL(blob);a.download='portfolio-backup.json';a.click();log('JSON exported')
}
function importJSON(){
  var inp=document.createElement('input');inp.type='file';inp.accept='.json';
  inp.onchange=function(e){
    var r=new FileReader();
    r.onload=function(ev){
      try{
        var d=JSON.parse(ev.target.result);
        ['splash','hero','about','marqueeItems','skills','projects','experience','certifications','contact','footer'].forEach(function(k){if(d[k])S[k]=d[k]});
        ['skills','projects','experience','certifications'].forEach(function(k){
          if(Array.isArray(S[k]))S[k]=S[k].map(function(x){return Object.assign({id:uid()},x)})
        });
        saveLocal();syncCounts();toast('Imported!','ok');log('JSON imported','ok')
      }catch(ex){toast('Invalid JSON file','er')}
    };
    r.readAsText(e.target.files[0])
  };inp.click()
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// FILE ‚Üí BASE64
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function f2b64(file,cb){var r=new FileReader();r.onload=function(e){cb(e.target.result)};r.readAsDataURL(file)}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// COLOR SWATCHES
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
var COLS=['#3178c6','#f74c00','#ffd43b','#61dafb','#00e676','#ff6b6b','#68a063','#e535ab','#326ce5','#ff6f00','#9d5cff','#ec4899','#00deb4','#f0b429','#ff0088'];
function buildSw(cid,iid,bid){
  var c=g(cid);if(!c)return;c.innerHTML='';
  COLS.forEach(function(col){
    var s=document.createElement('div');s.className='sw';s.style.background=col;
    s.addEventListener('click',function(){
      if(g(iid))g(iid).value=col;
      if(bid&&g(bid))g(bid).style.background=col;
      c.querySelectorAll('.sw').forEach(function(x){x.classList.remove('on')});s.classList.add('on')
    });c.appendChild(s)
  })
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// SPLASH
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function loadSplashForm(){var sp=S.splash||{};g('sp-logo').value=sp.logo||'';g('sp-tag').value=sp.tagline||'';g('sp-bg').value=sp.bg||'#04060f'}
function saveSplash(){
  S.splash={logo:v('sp-logo')||'NOVA',tagline:v('sp-tag')||'Booting Neural Interface',bg:v('sp-bg')||'#04060f'};
  saveLocal();toast('Splash saved ‚úì','ok');log('Splash updated','ok')
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// HERO
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function loadHeroForm(){
  var h=S.hero||{};
  g('hero-first').value=h.firstName||'';g('hero-last').value=h.lastName||'';
  g('hero-title').value=h.title||'';g('hero-sub').value=h.subtitle||'';
  g('hero-tagline').value=h.tagline||'';g('hero-glyph').value=h.glyph||'‚¨°';
  g('hero-avurl').value=(h.avatarUrl&&!h.avatarUrl.startsWith('data:'))?h.avatarUrl:'';
  g('hero-avail').value=h.availability||'OPEN TO WORK';
  var av=g('av-circle');
  if(h.avatarUrl){av.innerHTML='<img src="'+h.avatarUrl+'" style="width:100%;height:100%;object-fit:cover;border-radius:50%"/>'}
  else{av.innerHTML='';av.textContent=h.glyph||'‚¨°'}
  var s=h.stats||{};
  g('stat-pj').value=s.projects||'';g('stat-cl').value=s.clients||'';g('stat-yr').value=s.yearsExp||'';g('stat-km').value=s.commits||''
}
function saveHero(){
  var url=v('hero-avurl');
  if(!url&&S.hero&&S.hero.avatarUrl&&S.hero.avatarUrl.startsWith('data:'))url=S.hero.avatarUrl;
  S.hero={firstName:v('hero-first')||'ALEX',lastName:v('hero-last')||'NOVA',title:v('hero-title'),subtitle:v('hero-sub'),tagline:v('hero-tagline'),avatarUrl:url,glyph:v('hero-glyph')||'‚¨°',availability:v('hero-avail'),stats:{projects:+v('stat-pj')||0,clients:+v('stat-cl')||0,yearsExp:+v('stat-yr')||0,commits:+v('stat-km')||0}};
  saveLocal();toast('Hero saved ‚úì','ok');log('Hero updated','ok')
}
g('av-btn').addEventListener('click',function(){g('av-file').click()});
g('av-file').addEventListener('change',function(e){
  var f=e.target.files[0];if(!f)return;
  f2b64(f,function(b64){S.hero.avatarUrl=b64;g('av-circle').innerHTML='<img src="'+b64+'" style="width:100%;height:100%;object-fit:cover;border-radius:50%"/>';g('hero-avurl').value='(uploaded)';saveLocal();toast('Photo uploaded','ok')})
});
g('hero-avurl').addEventListener('input',function(){
  var url=this.value.trim();
  if(url&&!url.startsWith('('))g('av-circle').innerHTML='<img src="'+url+'" style="width:100%;height:100%;object-fit:cover;border-radius:50%"/>'
});

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// ABOUT
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function loadAboutForm(){
  var ab=S.about||{};
  g('ab-head').value=ab.heading||'';g('ab-bio').value=ab.bio||'';
  g('ab-pass').value=ab.passion||'';g('ab-foc').value=ab.focus||'';
  renderHL();renderMQ()
}
function saveAbout(){
  S.about={heading:v('ab-head')||'ABOUT',bio:v('ab-bio'),passion:v('ab-pass'),focus:v('ab-foc'),highlights:S.about.highlights||[]};
  saveLocal();toast('About saved ‚úì','ok');log('About updated','ok')
}
function renderHL(){
  var html='';
  (S.about.highlights||[]).forEach(function(h){
    html+='<div class="li"><div class="li-body"><span style="font-family:var(--fm);font-size:.64rem;color:#fff">'+h.label+'</span> <span style="color:var(--c)">‚Üí '+h.value+'</span></div>';
    html+='<button class="btn br bsm" onclick="delHL(\''+h.id+'\')"><span>‚úï</span></button></div>'
  });
  g('hl-list').innerHTML=html
}
function delHL(id){S.about.highlights=(S.about.highlights||[]).filter(function(h){return h.id!==id});renderHL()}
function renderMQ(){
  var html='';
  (S.marqueeItems||[]).forEach(function(item,i){
    html+='<div style="display:inline-flex;align-items:center;gap:4px;padding:5px 9px;background:rgba(0,222,180,.06);border:1px solid rgba(0,222,180,.2)">';
    html+='<span style="font-family:var(--fm);font-size:.57rem;color:var(--c)">'+item+'</span>';
    html+='<button onclick="delMQ('+i+')" style="background:none;border:none;color:var(--red);font-size:.8rem;cursor:pointer;padding:0 2px;line-height:1">‚úï</button></div>'
  });
  g('mq-list').innerHTML=html
}
function delMQ(i){S.marqueeItems.splice(i,1);renderMQ()}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// FOOTER
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function loadFooterForm(){
  var ft=S.footer||{};g('ft-logo').value=ft.logo||'';g('ft-copy').value=ft.copyright||'';g('ft-tag').value=ft.tagline||'';renderFTL()
}
function saveFooter(){
  S.footer=Object.assign(S.footer||{},{logo:v('ft-logo'),copyright:v('ft-copy'),tagline:v('ft-tag'),links:S.footer.links||[]});
  saveLocal();toast('Footer saved ‚úì','ok');log('Footer updated','ok')
}
function renderFTL(){
  var html='';
  (S.footer.links||[]).forEach(function(lk){
    html+='<div class="li"><div class="li-body"><span style="font-family:var(--fm);font-size:.64rem;color:#fff">'+lk.label+'</span> <span style="font-family:var(--fm);font-size:.55rem;color:var(--mt)"> ‚Üí '+lk.url+'</span></div>';
    html+='<button class="btn br bsm" onclick="delFTL(\''+lk.id+'\')"><span>‚úï</span></button></div>'
  });
  g('ftl-list').innerHTML=html
}
function delFTL(id){S.footer.links=(S.footer.links||[]).filter(function(l){return l.id!==id});renderFTL()}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// CONTACT
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function loadContactForm(){
  var ct=S.contact||{};
  g('ct-email').value=ct.email||'';g('ct-phone').value=ct.phone||'';
  g('ct-gh').value=ct.github||'';g('ct-li').value=ct.linkedin||'';
  g('ct-tw').value=ct.twitter||'';g('ct-loc').value=ct.location||'';
  g('ct-intro').value=ct.intro||''
}
function saveContact(){
  S.contact={email:v('ct-email'),phone:v('ct-phone'),github:v('ct-gh'),linkedin:v('ct-li'),twitter:v('ct-tw'),location:v('ct-loc'),intro:v('ct-intro')};
  saveLocal();toast('Contact saved ‚úì','ok');log('Contact updated','ok')
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// SKILLS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
g('sk-lv').addEventListener('input',function(){
  g('sk-lv-val').textContent=this.value;
  g('sk-lv-bar').style.width=this.value+'%';
  g('sk-lv-bar').style.background=g('sk-col').value||'var(--c)'
});
g('sk-col').addEventListener('input',function(){g('sk-lv-bar').style.background=this.value});
function addSkill(){
  var nm=v('sk-nm');if(!nm){toast('Skill name required','er');return}
  S.skills.push({id:uid(),name:nm,level:+g('sk-lv').value||80,category:v('sk-cat'),color:v('sk-col')||'#00deb4'});
  g('sk-nm').value='';g('sk-col').value='';g('sk-lv').value=85;g('sk-lv-val').textContent='85';g('sk-lv-bar').style.width='85%';
  renderSkills();saveLocal();toast('"'+nm+'" added','ok')
}
function delSkill(id){S.skills=S.skills.filter(function(s){return s.id!==id});renderSkills();saveLocal()}
function renderSkills(){
  var html='';
  S.skills.forEach(function(s){
    html+='<div class="li"><div class="li-stripe" style="background:'+s.color+'"></div>';
    html+='<div class="li-body"><div class="li-title">'+s.name+'</div><div class="li-sub">'+s.category+' ¬∑ '+s.level+'%</div>';
    html+='<div class="skb"><div class="skf" style="width:'+s.level+'%;background:'+s.color+'"></div></div></div>';
    html+='<button class="btn br bsm" onclick="delSkill(\''+s.id+'\')"><span>‚úï</span></button></div>'
  });
  g('sk-list').innerHTML=html||empty('No skills yet');
  g('sk-cnt').textContent=S.skills.length+' skills';syncCounts()
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// PROJECTS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function addProject(){
  var nm=v('pj-nm');if(!nm){toast('Title required','er');return}
  var metrics={};
  if(v('m1k')&&v('m1v'))metrics[v('m1k')]=v('m1v');
  if(v('m2k')&&v('m2v'))metrics[v('m2k')]=v('m2v');
  if(v('m3k')&&v('m3v'))metrics[v('m3k')]=v('m3v');
  S.projects.push({id:uid(),title:nm,subtitle:v('pj-sub'),description:v('pj-desc'),tech:v('pj-tc').split(',').map(function(t){return t.trim()}).filter(Boolean),category:v('pj-cat'),status:v('pj-st'),year:+v('pj-yr')||2025,metrics:metrics,color:v('pj-col')||'#00f0c8',featured:g('pj-ft').checked,liveUrl:v('pj-url'),githubUrl:v('pj-gh')});
  ['pj-nm','pj-sub','pj-desc','pj-tc','pj-col','pj-url','pj-gh','m1k','m1v','m2k','m2v','m3k','m3v'].forEach(function(id){if(g(id))g(id).value=''});
  renderProjects();saveLocal();toast('"'+nm+'" added','ok')
}
function delProject(id){S.projects=S.projects.filter(function(p){return p.id!==id});renderProjects();saveLocal()}
function toggleFeat(id){var p=S.projects.find(function(x){return x.id===id});if(p){p.featured=!p.featured;renderProjects();saveLocal()}}
function renderProjects(){
  var html='';
  S.projects.forEach(function(p){
    html+='<div class="li"><div class="li-stripe" style="background:'+p.color+'"></div>';
    html+='<div class="li-body"><div class="li-title" style="color:'+p.color+'">'+p.title+'</div>';
    html+='<div class="li-sub">'+p.subtitle+' ¬∑ '+p.status+' ¬∑ '+p.year+'</div>';
    html+='<div class="li-tags">';
    p.tech.slice(0,4).forEach(function(t){html+='<span class="li-tag">'+t+'</span>'});
    if(p.featured)html+='<span class="li-tag" style="background:rgba(0,222,180,.1);border-color:rgba(0,222,180,.3);color:var(--c)">‚≠êFEAT</span>';
    html+='</div></div>';
    html+='<div style="display:flex;flex-direction:column;gap:4px">';
    html+='<button class="btn ba bsm" onclick="toggleFeat(\''+p.id+'\')"><span>'+(p.featured?'UNFEAT':'FEAT')+'</span></button>';
    html+='<button class="btn br bsm" onclick="delProject(\''+p.id+'\')"><span>‚úï</span></button></div></div>'
  });
  g('pj-list').innerHTML=html||empty('No projects yet');
  g('pj-cnt').textContent=S.projects.length;syncCounts()
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// EXPERIENCE
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function addExp(){
  var co=v('ex-co');if(!co){toast('Company required','er');return}
  S.experience.push({id:uid(),company:co,role:v('ex-ro'),period:v('ex-pe'),description:v('ex-desc'),highlight:v('ex-hl')});
  ['ex-co','ex-ro','ex-pe','ex-desc','ex-hl'].forEach(function(id){if(g(id))g(id).value=''});
  renderExp();saveLocal();toast('Experience added','ok')
}
function delExp(id){S.experience=S.experience.filter(function(e){return e.id!==id});renderExp();saveLocal()}
function renderExp(){
  var html='';
  S.experience.forEach(function(e){
    html+='<div class="li"><div class="li-stripe" style="background:var(--mag)"></div>';
    html+='<div class="li-body"><div class="li-title">'+e.role+'</div>';
    html+='<div class="li-sub" style="color:var(--mag)">'+e.company+' ¬∑ '+e.period+'</div>';
    html+='<div class="li-sub" style="color:var(--c);margin-top:4px">‚áí '+e.highlight+'</div></div>';
    html+='<button class="btn br bsm" onclick="delExp(\''+e.id+'\')"><span>‚úï</span></button></div>'
  });
  g('ex-list').innerHTML=html||empty('No experience yet');syncCounts()
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// CERTIFICATIONS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
var _certImg='';
g('cert-file').addEventListener('change',function(e){
  var f=e.target.files[0];if(!f)return;
  f2b64(f,function(b64){_certImg=b64;var i=g('cert-drop-img');i.src=b64;i.style.display='block';toast('Badge loaded','ok')})
});
function addCert(){
  var nm=v('ce-title');if(!nm){toast('Title required','er');return}
  S.certifications.push({id:uid(),title:nm,issuer:v('ce-iss'),date:v('ce-date'),credentialId:v('ce-id'),category:v('ce-cat'),color:v('ce-col')||'#9d5cff',image:_certImg||v('ce-url')||''});
  _certImg='';
  ['ce-title','ce-iss','ce-date','ce-id','ce-col','ce-url'].forEach(function(id){if(g(id))g(id).value=''});
  var i=g('cert-drop-img');i.src='';i.style.display='none';
  renderCerts();saveLocal();toast('Certification added','ok')
}
function delCert(id){S.certifications=S.certifications.filter(function(c){return c.id!==id});renderCerts();saveLocal()}
function renderCerts(){
  var html='';
  S.certifications.forEach(function(c){
    var thumb=c.image
      ?'<img src="'+c.image+'" style="width:48px;height:48px;object-fit:contain;border-radius:4px;border:1px solid '+c.color+'33;flex-shrink:0"/>'
      :'<div style="width:48px;height:48px;background:rgba(0,0,0,.3);border:1px solid '+c.color+'33;display:flex;align-items:center;justify-content:center;font-size:1.4rem;flex-shrink:0">üéñ</div>';
    html+='<div class="li">'+thumb+'<div class="li-stripe" style="background:'+c.color+'"></div>';
    html+='<div class="li-body"><div class="li-title" style="color:'+c.color+'">'+c.title+'</div>';
    html+='<div class="li-sub">'+c.issuer+' ¬∑ '+c.date+'</div>';
    html+='<div class="li-sub" style="color:var(--mt)">'+c.category+' ¬∑ '+c.credentialId+'</div></div>';
    html+='<button class="btn br bsm" onclick="delCert(\''+c.id+'\')"><span>‚úï</span></button></div>'
  });
  g('ce-list').innerHTML=html||empty('No certifications yet');syncCounts()
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// INBOX
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function renderInbox(){
  var msgs=S.contacts||[];
  msgs.forEach(function(m){m.read=true});saveLocal();syncCounts();
  if(!msgs.length){g('inbox-body').innerHTML=empty('No messages yet.\n\nMessages from your portfolio contact form appear here.');return}
  var html='';
  msgs.forEach(function(m){
    html+='<div class="msg"><div class="msg-hd"><div><div class="msg-nm">'+m.name+'</div><div class="msg-em">'+m.email+'</div></div>';
    html+='<div class="msg-tm">'+new Date(m.sent).toLocaleString()+'</div></div>';
    html+='<div class="msg-sj">'+m.subject+'</div><div class="msg-bd">'+m.message+'</div></div>'
  });
  g('inbox-body').innerHTML=html
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// SETTINGS ‚Äî fill form from stored values
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function fillSettings(){
  g('cfg-tok').value=TOKEN;g('cfg-uname').value=GH_USER;g('cfg-repo-in').value=GH_REPO;g('cfg-gid-in').value=GIST_ID;
  if(g('cfg-user'))g('cfg-user').textContent=GH_USER||'‚Äî';
  if(g('cfg-repo'))g('cfg-repo').textContent=GH_REPO||'‚Äî';
  if(g('cfg-gid'))g('cfg-gid').textContent=GIST_ID||'‚Äî';
  var rawUrl=localStorage.getItem('portfolio_gist_raw_url')||'‚Äî';
  var rawRepo=localStorage.getItem('portfolio_raw_repo_url')||'‚Äî';
  if(g('cfg-datajson'))g('cfg-datajson').textContent=rawUrl;
  if(g('cfg-rawrepo'))g('cfg-rawrepo').textContent=rawRepo
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// CHANGE PASSWORD
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
async function changePw(){
  var op=prompt('Current password:');if(op===null)return;
  if(await sha256(op)!==localStorage.getItem('nova_pw')){toast('Wrong password','er');return}
  var np=prompt('New password (min 6):');if(!np||np.length<6){toast('Too short','er');return}
  if(prompt('Confirm new password:')!==np){toast('Passwords do not match','er');return}
  localStorage.setItem('nova_pw',await sha256(np));sessionStorage.removeItem('nvs');
  toast('Password changed ‚Äî logging out‚Ä¶','ok');setTimeout(function(){location.reload()},1500)
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// WIRE ALL EVENTS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function wireEvents(){
  // Top bar
  g('tb-push').addEventListener('click',pushToGitHub);
  // Dashboard
  g('qa-push').addEventListener('click',pushToGitHub);
  g('qa-pull').addEventListener('click',pullFromGist);
  g('qa-export').addEventListener('click',exportJSON);
  g('qa-import').addEventListener('click',importJSON);
  g('qa-clrlog').addEventListener('click',function(){g('log-box').innerHTML='';log('Log cleared','in')});
  // Swatches
  buildSw('sp-sw','sp-bg',null);
  buildSw('sk-sw','sk-col','sk-lv-bar');
  buildSw('pj-sw','pj-col',null);
  buildSw('ce-sw','ce-col',null);
  // Splash
  g('save-splash').addEventListener('click',saveSplash);
  // Hero
  g('save-hero').addEventListener('click',saveHero);
  // About
  g('save-about').addEventListener('click',saveAbout);
  g('add-hl').addEventListener('click',function(){
    var lbl=v('hl-lbl'),val=v('hl-val');if(!lbl||!val){toast('Both fields required','er');return}
    if(!S.about.highlights)S.about.highlights=[];
    S.about.highlights.push({id:uid(),label:lbl,value:val});
    g('hl-lbl').value='';g('hl-val').value='';renderHL()
  });
  g('add-mq').addEventListener('click',function(){
    var kw=v('mq-kw').toUpperCase();if(!kw){toast('Enter a keyword','er');return}
    S.marqueeItems.push(kw);g('mq-kw').value='';renderMQ()
  });
  // Footer
  g('save-footer').addEventListener('click',saveFooter);
  g('add-ftl').addEventListener('click',function(){
    var lbl=v('ftl-lbl'),url=v('ftl-url');if(!lbl||!url){toast('Label and URL required','er');return}
    if(!S.footer.links)S.footer.links=[];
    S.footer.links.push({id:uid(),label:lbl,url:url});
    g('ftl-lbl').value='';g('ftl-url').value='';renderFTL()
  });
  // Skills
  g('add-skill').addEventListener('click',addSkill);
  // Projects
  g('add-proj').addEventListener('click',addProject);
  // Experience
  g('add-exp').addEventListener('click',addExp);
  // Certs
  g('add-cert').addEventListener('click',addCert);
  // Contact
  g('save-contact').addEventListener('click',saveContact);
  // Inbox
  g('clr-msgs').addEventListener('click',function(){if(!confirm('Clear all messages?'))return;S.contacts=[];saveLocal();renderInbox()});
  // Settings
  g('cfg-save').addEventListener('click',function(){
    TOKEN=v('cfg-tok');GH_USER=v('cfg-uname');GH_REPO=v('cfg-repo-in');GIST_ID=v('cfg-gid-in');
    localStorage.setItem('portfolio_token',TOKEN);localStorage.setItem('portfolio_gh_user',GH_USER);
    localStorage.setItem('portfolio_gh_repo',GH_REPO);if(GIST_ID)localStorage.setItem('portfolio_gist_id',GIST_ID);
    if(g('cfg-user'))g('cfg-user').textContent=GH_USER||'‚Äî';
    if(g('cfg-repo'))g('cfg-repo').textContent=GH_REPO||'‚Äî';
    if(g('cfg-gid'))g('cfg-gid').textContent=GIST_ID||'‚Äî';
    verifyGH();toast('Config saved ‚úì','ok');log('GitHub config saved')
  });
  g('cfg-push').addEventListener('click',pushToGitHub);
  g('cfg-pull').addEventListener('click',pullFromGist);
  if(g('cfg-pull-dj'))g('cfg-pull-dj').addEventListener('click',pullFromDataJson);
  g('qa-export2').addEventListener('click',exportJSON);
  g('qa-import2').addEventListener('click',importJSON);
  g('change-pw').addEventListener('click',changePw);
  g('reset-data').addEventListener('click',function(){if(confirm('RESET ALL data? Cannot undo.')){localStorage.removeItem('portfolio_state');location.reload()}});
  g('disc-gh').addEventListener('click',function(){
    TOKEN='';GH_USER='';GH_REPO='';GIST_ID='';
    ['portfolio_token','portfolio_gh_user','portfolio_gh_repo','portfolio_gist_id'].forEach(function(k){localStorage.removeItem(k)});
    setGHStatus(false);fillSettings();toast('Disconnected','in');log('GitHub disconnected')
  });
  // GH modal
  g('m-connect').addEventListener('click',async function(){
    var tok=g('m-tok').value.trim(),user=g('m-user').value.trim(),repo=g('m-repo').value.trim();
    if(!tok){toast('Token required','er');return}
    var gid=g('m-gid')?g('m-gid').value.trim():'';
    TOKEN=tok;GH_USER=user;GH_REPO=repo;
    if(gid){GIST_ID=gid;localStorage.setItem('portfolio_gist_id',gid)}
    localStorage.setItem('portfolio_token',tok);
    if(user)localStorage.setItem('portfolio_gh_user',user);
    if(repo)localStorage.setItem('portfolio_gh_repo',repo);
    g('gh-modal').classList.add('hide');
    await verifyGH();
    // Auto-pull: try data.json first (gets gistId too), then Gist
    if(user&&repo){
      toast('Connected! Pulling your portfolio data‚Ä¶','in');
      await pullFromDataJson();
      // If pull discovered gistId, also pull from Gist for freshest data
      if(GIST_ID)await pullFromGist()
    }else if(GIST_ID){
      await pullFromGist()
    }else{
      toast('Connected! Click ‚¨Ü PUSH from desktop, then ‚¨á PULL here','ok',6000)
    }
  });
  g('m-skip').addEventListener('click',function(){localStorage.setItem('nova_skip_gh','1');g('gh-modal').classList.add('hide');toast('Running in local-only mode','in')});
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// BOOT
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function bootAdmin(){
  loadLocal();
  TOKEN=localStorage.getItem('portfolio_token')||'';
  GH_USER=localStorage.getItem('portfolio_gh_user')||'';
  GH_REPO=localStorage.getItem('portfolio_gh_repo')||'';
  GIST_ID=localStorage.getItem('portfolio_gist_id')||'';
  wireEvents();
  renderSkills();renderProjects();renderExp();renderCerts();syncCounts();
  if(TOKEN)verifyGH();else setGHStatus(false);
  fillSettings();
  // Show GH modal if not configured
  if(!TOKEN&&!localStorage.getItem('nova_skip_gh')){
    setTimeout(function(){g('gh-modal').classList.remove('hide')},600)
  }else if(TOKEN&&(!GH_USER||!GH_REPO)){
    showSyncStatus('‚ö† GitHub connected but <strong>Username + Repo not set</strong> ‚Äî go to Settings ‚Üí GitHub Configuration to complete setup','in')
  }else if(TOKEN&&GH_USER&&GH_REPO&&GIST_ID){
    showSyncStatus('‚úì Fully configured ‚Äî <strong>‚¨Ü PUSH</strong> writes to GitHub Pages (all devices) + Gist backup. <strong>‚¨á PULL</strong> restores from Gist.','ok')
  }else if(TOKEN&&GH_USER&&GH_REPO){
    showSyncStatus('‚úì GitHub configured ‚Äî click <strong>‚¨Ü PUSH</strong> to sync. First push creates Gist backup + data.json on GitHub Pages','ok')
  }
  log('Admin panel ready ¬∑ '+new Date().toLocaleTimeString(),'ok')
}

if(sesOK())bootAdmin()
</script>
</body>
</html>
